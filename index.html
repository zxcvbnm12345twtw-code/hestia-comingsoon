<!DOCTYPE html>
<html lang="zh-TW" data-theme="ethereal-cool">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>HestiaTW | 喚醒內在色溫，探索空靈光韻</title>
  <meta name="description" content="HestiaTW - 結合身心靈節律的運動美學，透過內在色溫與空靈光韻，重新定義健身體驗。" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@200..900&display=swap">

  <style>
    :root{
      /* THEME ENGINE: INNER COLOR TEMPERATURE */
      --hue-core: 210;
      --sat-core: 80%;
      --light-core: 50%;

      --color-ether-primary: hsl(var(--hue-core), var(--sat-core), 95%);
      --color-ether-secondary: hsl(var(--hue-core), 40%, 70%);
      --color-ether-glow: hsl(var(--hue-core), 100%, 70%);
      --color-void: hsl(var(--hue-core), 30%, 5%);

      /* 4-7-8 */
      --breath-in: 4s;
      --breath-hold: 7s;
      --breath-out: 8s;
      --breath-total: 19s;

      /* Glass */
      --glass-bg: rgba(255, 255, 255, 0.03);
      --glass-border: rgba(255, 255, 255, 0.08);
      --glass-blur: 16px;
      --glass-shadow: 0 8px 32px rgba(0,0,0,.30);

      --font-primary: "Inter", system-ui, -apple-system, "Segoe UI", Arial, sans-serif;

      --radius-xl: 18px;
      --radius-lg: 16px;
      --radius-md: 12px;
      --ring: hsl(var(--hue-core), 100%, 70%);
      --muted: hsl(var(--hue-core), 30%, 65%);
      --border: rgba(255,255,255,.10);

      --container: 1180px;
      --pad: clamp(16px, 3vw, 28px);
    }

    body[data-temp="warm"]{
      --hue-core: 25;
      --sat-core: 90%;
    }
    body[data-temp="neutral"]{
      --hue-core: 260;
      --sat-core: 40%;
    }
    body[data-temp="cool"]{
      --hue-core: 210;
      --sat-core: 80%;
    }

    *{ box-sizing: border-box; }
    html, body { height: 100%; }
    body{
      margin:0;
      font-family: var(--font-primary);
      background: var(--color-void);
      color: var(--color-ether-primary);
      overflow-x: hidden;
      transition: background-color 1.2s cubic-bezier(0.25,1,0.5,1);
    }

    a{ color: inherit; text-decoration: none; }
    img{ max-width: 100%; display:block; }

    /* ===== Ambient Core (Aurora) ===== */
    #ambient-core{
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      z-index: -2;
      background: var(--color-void);
      filter: contrast(120%) brightness(110%);
      overflow: hidden;
    }
    .aurora-blob{
      position:absolute;
      border-radius: 50%;
      filter: blur(80px);
      opacity: .60;
      mix-blend-mode: screen;
      animation: drift 25s infinite alternate ease-in-out;
      transform: translateZ(0);
      will-change: transform;
    }
    .blob-primary{
      top: -10%;
      left: -10%;
      width: 60vw;
      height: 60vw;
      background: radial-gradient(circle, var(--color-ether-glow), transparent 70%);
    }
    .blob-secondary{
      bottom: -10%;
      right: -20%;
      width: 70vw;
      height: 70vw;
      background: radial-gradient(circle, hsl(calc(var(--hue-core) + 30), 80%, 50%), transparent 70%);
      animation-delay: -5s;
      animation-duration: 30s;
    }
    .blob-accent{
      top: 35%;
      left: 55%;
      width: 55vw;
      height: 55vw;
      background: radial-gradient(circle, hsl(calc(var(--hue-core) + 80), 90%, 55%), transparent 70%);
      animation-delay: -12s;
      animation-duration: 34s;
      opacity: .45;
    }
    @keyframes drift{
      0%{ transform: translate(0,0) scale(1) rotate(0deg); }
      33%{ transform: translate(10%,15%) scale(1.1) rotate(10deg); }
      66%{ transform: translate(-5%,5%) scale(.9) rotate(-5deg); }
      100%{ transform: translate(5%,-10%) scale(1.05) rotate(5deg); }
    }
    .noise-overlay{
      position:absolute;
      inset:0;
      pointer-events: none;
      opacity: .06;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
      mix-blend-mode: overlay;
    }

    /* ===== Foreground layers ===== */
    .foreground-canvas{
      position: fixed;
      inset: 0;
      z-index: 10;
      pointer-events: none;
      opacity: .18;
    }
    .flashlight-mask{
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 50;
      background: radial-gradient(circle 250px at var(--x, 50%) var(--y, 50%), transparent 0%, rgba(0,0,0,0.60) 100%);
      transition: background .1s;
    }

    /* ===== Layout ===== */
    .sanctuary-container{
      width: min(var(--container), 100%);
      margin: 0 auto;
      padding: calc(var(--pad) + 64px) var(--pad) 72px;
    }

    /* ===== Glass primitives ===== */
    .glass-panel, .glass-card, .glass-button{
      background: var(--glass-bg);
      backdrop-filter: blur(var(--glass-blur));
      -webkit-backdrop-filter: blur(var(--glass-blur));
      border: 1px solid var(--glass-border);
      box-shadow: var(--glass-shadow);
    }

    .glass-card{
      border-radius: var(--radius-lg);
      position: relative;
      overflow: hidden;
      transition: transform .4s ease, border-color .4s ease, box-shadow .4s ease;
      will-change: transform;
    }
    .glass-card:hover{
      transform: translateY(-5px);
      border-color: color-mix(in srgb, var(--color-ether-glow) 65%, rgba(255,255,255,.2));
      box-shadow: 0 15px 40px rgba(0,0,0,.40), 0 0 20px color-mix(in srgb, var(--color-ether-glow) 70%, transparent);
    }
    .glass-card::before{
      content:"";
      position:absolute;
      inset:0;
      left:-150%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.20), transparent);
      transform: skewX(-25deg);
      transition: left .6s ease;
      pointer-events: none;
    }
    .glass-card:hover::before{ left: 150%; }

    /* ===== Nav ===== */
    .ether-nav{
      position: fixed;
      top: 14px;
      left: 50%;
      transform: translateX(-50%);
      width: min(var(--container), calc(100% - 28px));
      z-index: 40;
      border-radius: 999px;
      padding: 10px 12px;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
    }

    .logo-container{
      display:flex;
      align-items:center;
      gap: 10px;
      padding-left: 6px;
      min-width: 170px;
    }
    .hestia-svg-logo{
      width: 34px;
      height: 34px;
      color: var(--color-ether-primary);
      display:block;
    }
    .brand-word{
      font-weight: 650;
      letter-spacing: .06em;
      font-size: 13px;
      opacity: .92;
    }

    .main-menu{ display:flex; align-items:center; }
    .nav-links{
      list-style:none;
      margin:0;
      padding:0;
      display:flex;
      gap: 8px;
      align-items:center;
    }
    .nav-item{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid transparent;
      font-size: 13px;
      color: color-mix(in srgb, var(--color-ether-primary) 85%, var(--muted));
      transition: background .25s ease, border-color .25s ease, transform .25s ease;
      user-select: none;
      white-space: nowrap;
    }
    .nav-item:hover{
      background: rgba(255,255,255,.05);
      border-color: rgba(255,255,255,.12);
      transform: translateY(-1px);
    }
    .temp-dot{
      width: 8px; height: 8px; border-radius: 999px;
      box-shadow: 0 0 12px color-mix(in srgb, var(--color-ether-glow) 40%, transparent);
      opacity: .9;
    }
    .temp-dot.cool{ background: hsl(210, 90%, 65%); }
    .temp-dot.warm{ background: hsl(25, 95%, 62%); }

    .breath-widget{
      display:flex;
      align-items:center;
      gap: 10px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.12);
      margin-left: 8px;
    }
    .breath-text{
      font-size: 12px;
      letter-spacing: .06em;
      color: color-mix(in srgb, var(--color-ether-primary) 75%, var(--muted));
      min-width: 64px;
    }

    .breath-ring{ display:block; }
    .ring-track{
      fill: none;
      stroke: rgba(255,255,255,.10);
      stroke-width: 2.5;
    }
    .ring-indicator{
      fill:none;
      stroke: var(--ring);
      stroke-width: 2.5;
      stroke-linecap: round;
      transform: rotate(-90deg);
      transform-origin: 50% 50%;
      stroke-dasharray: 113.1; /* 2πr (r=18) */
      stroke-dashoffset: 113.1;
      filter: drop-shadow(0 0 8px color-mix(in srgb, var(--color-ether-glow) 55%, transparent));
    }

    .mobile-menu-trigger{
      display:none;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color: var(--color-ether-primary);
      border-radius: 999px;
      padding: 10px 12px;
      cursor:pointer;
    }
    .icon-hamburger{ width: 18px; height: 18px; fill:none; stroke: currentColor; stroke-width:2; }

    @media (max-width: 860px){
      .main-menu{ display:none; }
      .mobile-menu-trigger{ display:inline-flex; align-items:center; justify-content:center; }
      .logo-container{ min-width: auto; }
      .breath-widget{ display:none; }
      .ether-nav{ border-radius: 18px; padding: 10px; }
      .mobile-drawer{
        position: fixed;
        top: 78px;
        left: 50%;
        transform: translateX(-50%);
        width: min(var(--container), calc(100% - 28px));
        z-index: 45;
        border-radius: 18px;
        padding: 10px;
        display:none;
      }
      .mobile-drawer.open{ display:block; }
      .mobile-links{
        list-style:none;
        margin:0; padding:0;
        display:grid;
        gap: 8px;
      }
      .mobile-links a{
        display:flex;
        justify-content: space-between;
        align-items:center;
        padding: 12px 12px;
        border-radius: 14px;
        border: 1px solid rgba(255,255,255,.10);
        background: rgba(255,255,255,.03);
      }
    }

    /* ===== Hero ===== */
    .hero-manifestation{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap: clamp(18px, 3vw, 42px);
      align-items:center;
      min-height: calc(100vh - 120px);
      padding: 18px 0 24px;
    }
    @media (max-width: 980px){
      .hero-manifestation{ grid-template-columns: 1fr; min-height: auto; padding-top: 30px; }
    }

    .hero-content{
      padding: 8px 0;
    }
    .split-char-reveal{
      margin:0;
      font-weight: 780;
      letter-spacing: .02em;
      line-height: .95;
      font-size: clamp(44px, 5.6vw, 76px);
      text-shadow: 0 0 28px color-mix(in srgb, var(--color-ether-glow) 20%, transparent);
    }
    .split-char-reveal .line{
      display:block;
      background: linear-gradient(180deg, var(--color-ether-primary), color-mix(in srgb, var(--color-ether-primary) 65%, var(--muted)));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    .subtitle-glow{
      margin: 14px 0 22px;
      color: color-mix(in srgb, var(--color-ether-primary) 70%, var(--muted));
      letter-spacing: .08em;
      font-size: 13px;
      text-transform: uppercase;
    }

    .cta-button{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      padding: 12px 18px;
      border-radius: 999px;
      position: relative;
      border: 1px solid rgba(255,255,255,.12);
      overflow:hidden;
    }
    .cta-button .btn-text{
      position: relative;
      z-index: 2;
      font-size: 13px;
      letter-spacing: .08em;
      font-weight: 650;
    }
    .cta-button .btn-glow{
      position:absolute;
      inset: -40%;
      background: radial-gradient(circle at 30% 30%, color-mix(in srgb, var(--color-ether-glow) 55%, transparent), transparent 55%);
      opacity: .75;
      z-index: 1;
      filter: blur(18px);
      animation: breathe-cycle var(--breath-total) infinite ease-in-out;
    }

    /* 4-7-8 breathe cycle (site-wide) */
    @keyframes breathe-cycle{
      0%{ transform: scale(1); opacity: .70; }
      21%{ transform: scale(1.06); opacity: 1; }
      58%{ transform: scale(1.06); opacity: 1; }
      100%{ transform: scale(1); opacity: .70; }
    }

    /* ===== Product stage ===== */
    .product-stage{
      position: relative;
      display:flex;
      align-items:center;
      justify-content:center;
      min-height: 420px;
    }
    .smoke-emitter{
      position:absolute;
      inset: -20%;
      background: radial-gradient(circle at 40% 30%, rgba(255,255,255,.06), transparent 55%),
                  radial-gradient(circle at 70% 60%, rgba(255,255,255,.04), transparent 50%);
      filter: blur(20px);
      opacity: .65;
      animation: breathe-cycle var(--breath-total) infinite ease-in-out;
      pointer-events:none;
    }
    .product-figure{
      width: min(440px, 92%);
      margin: 0;
      border-radius: 28px;
      overflow:hidden;
      position: relative;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.02);
      box-shadow: 0 20px 70px rgba(0,0,0,.45);
      transform: translateZ(0);
    }
    .image-mask-wrapper{
      position: relative;
      padding: 14px;
    }
    .product-img{
      border-radius: 22px;
      width: 100%;
      height: auto;
      /* Optional: if you later provide assets/masks/smoke-edge.svg, this will kick in */
      mask-image: url("assets/masks/smoke-edge.svg");
      -webkit-mask-image: url("assets/masks/smoke-edge.svg");
      mask-mode: alpha;
      mask-repeat: no-repeat;
      mask-size: 100% 100%;
    }

    /* ===== Section ===== */
    .collection-section{
      margin-top: 44px;
      padding-top: 12px;
    }
    .section-header{
      display:flex;
      align-items:flex-end;
      justify-content: space-between;
      gap: 12px;
      margin: 10px 0 18px;
    }
    .section-header h2{
      margin:0;
      font-size: 18px;
      letter-spacing: .06em;
      font-weight: 720;
    }
    .temp-indicator-line{
      flex: 1;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.16), transparent);
      max-width: 520px;
      border-radius: 999px;
    }

    .card-grid{
      display:grid;
      gap: 2rem;
      padding: 1rem 0;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      max-width: 1400px;
      margin: 0 auto;
    }

    /* ===== Product card ===== */
    .product-card{
      transform-style: preserve-3d;
    }
    .card-media{
      position:relative;
      aspect-ratio: 4 / 3;
      border-bottom: 1px solid rgba(255,255,255,.08);
      overflow:hidden;
    }
    .card-media img{
      width:100%;
      height:100%;
      object-fit: cover;
      transform: scale(1.03);
      filter: saturate(1.05) contrast(1.02);
    }
    .reveal-overlay{
      position:absolute;
      inset:0;
      background: radial-gradient(circle at 30% 20%, rgba(255,255,255,.08), transparent 55%);
      opacity: .75;
      pointer-events:none;
      mix-blend-mode: screen;
    }

    .card-info{
      padding: 14px 14px 16px;
      display:grid;
      gap: 10px;
    }
    .card-info h3{
      margin:0;
      font-size: 16px;
      letter-spacing: .04em;
    }
    .price{
      margin:0;
      font-size: 13px;
      color: color-mix(in srgb, var(--color-ether-primary) 70%, var(--muted));
    }

    .color-selector{
      display:flex;
      gap: 10px;
      align-items:center;
    }
    .color-radio{
      position:absolute;
      opacity:0;
      pointer-events:none;
    }
    .color-selector label{
      width: 18px;
      height: 18px;
      border-radius: 999px;
      background: var(--bg);
      border: 1px solid rgba(255,255,255,.22);
      box-shadow: 0 0 0 0 rgba(0,0,0,0);
      cursor:pointer;
      transition: transform .2s ease, box-shadow .2s ease;
    }
    .color-selector label:hover{
      transform: translateY(-1px) scale(1.06);
      box-shadow: 0 0 0 4px rgba(255,255,255,.06);
    }

    /* ===== Footer ===== */
    .sediment-footer{
      width: min(var(--container), calc(100% - 28px));
      margin: 0 auto 20px;
      padding: 16px var(--pad);
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.02);
      color: color-mix(in srgb, var(--color-ether-primary) 70%, var(--muted));
    }
    .footer-grid{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }
    .brand-col{
      display:flex;
      align-items:center;
      gap: 10px;
    }
    .footer-logo{
      width: 26px;
      height: 26px;
      opacity: .95;
    }
    .fine{
      font-size: 12px;
      letter-spacing: .06em;
      opacity: .85;
    }

    /* ===== Accessibility / motion ===== */
    @media (prefers-reduced-motion: reduce){
      .aurora-blob, .smoke-emitter, .cta-button .btn-glow { animation: none !important; }
      .flashlight-mask{ display:none; }
    }
  </style>
</head>

<body class="loading-state" data-temp="cool">

  <!-- Hidden SVG defs (turbulence filter) -->
  <svg aria-hidden="true" style="position:absolute;width:0;height:0;overflow:hidden">
    <defs>
      <filter id="ethereal-flame">
        <feTurbulence type="fractalNoise" baseFrequency="0.02" numOctaves="3" result="noise" seed="0">
          <animate attributeName="baseFrequency" values="0.02;0.03;0.02" dur="6s" repeatCount="indefinite"></animate>
        </feTurbulence>
        <feDisplacementMap in="SourceGraphic" in2="noise" scale="6"></feDisplacementMap>
        <feGaussianBlur stdDeviation="1"></feGaussianBlur>
      </filter>
    </defs>
  </svg>

  <div id="ambient-core" aria-hidden="true">
    <div class="aurora-blob blob-primary"></div>
    <div class="aurora-blob blob-secondary"></div>
    <div class="aurora-blob blob-accent"></div>
    <div class="noise-overlay"></div>
  </div>

  <header class="ether-nav glass-panel">
    <div class="logo-container" id="brand-logo-slot">
      <a href="#hero" aria-label="HestiaTW 首頁" style="display:flex;align-items:center;gap:10px;">
        <!-- Placeholder logo SVG (replace paths with your official SVG paths) -->
        <svg class="hestia-svg-logo" viewBox="0 0 100 100" role="img" aria-label="HestiaTW Logo">
          <path class="logo-path" d="M50 10 C35 25,30 35,30 48 C30 68,45 83,50 90 C55 83,70 68,70 48 C70 35,65 25,50 10 Z"
                fill="currentColor" opacity=".92"/>
          <path class="logo-path" d="M50 22 C42 31,40 37,40 48 C40 60,47 70,50 74 C53 70,60 60,60 48 C60 37,58 31,50 22 Z"
                fill="currentColor" opacity=".55"/>
        </svg>
        <span class="brand-word">HESTIA&nbsp;TW</span>
      </a>
    </div>

    <nav class="main-menu" aria-label="主選單">
      <ul class="nav-links">
        <li><a href="#series-mist" data-temp="cool" class="nav-item">Mist Series <span class="temp-dot cool"></span></a></li>
        <li><a href="#series-ember" data-temp="warm" class="nav-item">Ember Series <span class="temp-dot warm"></span></a></li>
        <li><a href="#philosophy" data-temp="neutral" class="nav-item">Philosophy</a></li>
      </ul>
    </nav>

    <div class="breath-widget" role="status" aria-label="呼吸節律引導">
      <svg class="breath-ring" width="40" height="40" viewBox="0 0 40 40" aria-hidden="true">
        <circle class="ring-track" cx="20" cy="20" r="18"></circle>
        <circle class="ring-indicator" cx="20" cy="20" r="18"></circle>
      </svg>
      <span class="breath-text" id="breathText">Inhale</span>
    </div>

    <button class="mobile-menu-trigger" id="mobileMenuBtn" aria-label="開啟選單" aria-expanded="false">
      <svg class="icon-hamburger" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M4 7h16M4 12h16M4 17h16"></path>
      </svg>
    </button>
  </header>

  <!-- Mobile drawer -->
  <div class="mobile-drawer glass-panel" id="mobileDrawer" aria-label="手機選單">
    <ul class="mobile-links">
      <li><a href="#series-mist" data-temp="cool">Mist Series <span class="temp-dot cool"></span></a></li>
      <li><a href="#series-ember" data-temp="warm">Ember Series <span class="temp-dot warm"></span></a></li>
      <li><a href="#philosophy" data-temp="neutral">Philosophy</a></li>
    </ul>
  </div>

  <main class="sanctuary-container">
    <section class="hero-manifestation" id="hero">
      <div class="hero-content">
        <h1 class="split-char-reveal">
          <span class="line">內在</span>
          <span class="line">色溫</span>
        </h1>
        <p class="subtitle-glow">Exploring the Ethereal Aura within.</p>
        <a href="#series-mist" class="cta-button glass-button" data-temp="cool">
          <span class="btn-text">探索系列</span>
          <span class="btn-glow" aria-hidden="true"></span>
        </a>
      </div>

      <div class="product-stage" aria-label="主視覺商品舞台">
        <div class="smoke-emitter" aria-hidden="true"></div>
        <figure class="product-figure" id="hero-product-figure">
          <div class="image-mask-wrapper">
            <!-- 你可替換成自己的 WebP 路徑 -->
            <img src="assets/products/hero-leggings.webp" alt="Hestia Activewear" class="product-img" />
          </div>
        </figure>
      </div>
    </section>

    <section id="series-mist" class="collection-section" data-temp="cool">
      <header class="section-header">
        <h2>Mist Collection</h2>
        <div class="temp-indicator-line" aria-hidden="true"></div>
      </header>

      <div class="card-grid">
        <article class="product-card glass-card" data-tilt tabindex="0" aria-label="Flow Bra 商品卡片">
          <div class="card-media">
            <img src="assets/products/mist-top.webp" alt="Mist Top" />
            <div class="reveal-overlay"></div>
          </div>
          <div class="card-info">
            <h3>Flow Bra</h3>
            <p class="price">NT$ 1,280</p>
            <div class="color-selector" aria-label="顏色選擇">
              <input type="radio" name="p1-color" id="p1-c1" class="color-radio" checked>
              <label for="p1-c1" style="--bg:#a0c4ff" title="Ice Blue"></label>
              <input type="radio" name="p1-color" id="p1-c2" class="color-radio">
              <label for="p1-c2" style="--bg:#bdb2ff" title="Lavender Mist"></label>
            </div>
          </div>
        </article>
      </div>
    </section>

    <section id="series-ember" class="collection-section" data-temp="warm">
      <header class="section-header">
        <h2>Ember Collection</h2>
        <div class="temp-indicator-line" aria-hidden="true"></div>
      </header>

      <div class="card-grid">
        <article class="product-card glass-card" data-tilt tabindex="0" aria-label="Ignite Short 商品卡片">
          <div class="card-media">
            <img src="assets/products/ember-short.webp" alt="Ember Short" />
            <div class="reveal-overlay"></div>
          </div>
          <div class="card-info">
            <h3>Ignite Short</h3>
            <p class="price">NT$ 1,480</p>
            <div class="color-selector" aria-label="顏色選擇">
              <input type="radio" name="p2-color" id="p2-c1" class="color-radio" checked>
              <label for="p2-c1" style="--bg:#ff7a59" title="Flame Coral"></label>
              <input type="radio" name="p2-color" id="p2-c2" class="color-radio">
              <label for="p2-c2" style="--bg:#ffb703" title="Amber Gold"></label>
            </div>
          </div>
        </article>
      </div>
    </section>

    <section id="philosophy" class="collection-section" data-temp="neutral">
      <header class="section-header">
        <h2>Philosophy</h2>
        <div class="temp-indicator-line" aria-hidden="true"></div>
      </header>

      <div class="card-grid">
        <article class="glass-card" style="padding:18px 18px 16px; border-radius: var(--radius-xl);">
          <h3 style="margin:0 0 10px; letter-spacing:.04em;">Rhythmic Synchronization</h3>
          <p style="margin:0; color: color-mix(in srgb, var(--color-ether-primary) 70%, var(--muted)); line-height:1.7; font-size:14px;">
            以 4-7-8 的呼吸節律對齊全站微動畫：吸氣、閉氣、吐氣。
            讓使用者在探索與決策之間，自然放慢，心率下降，焦慮感變小。
          </p>
        </article>
      </div>
    </section>
  </main>

  <canvas id="interference-canvas" class="foreground-canvas"></canvas>
  <div class="flashlight-mask" id="cursor-light"></div>

  <footer class="sediment-footer">
    <div class="footer-grid">
      <div class="brand-col">
        <svg class="footer-logo" viewBox="0 0 100 100" aria-hidden="true">
          <path d="M50 10 C35 25,30 35,30 48 C30 68,45 83,50 90 C55 83,70 68,70 48 C70 35,65 25,50 10 Z"
                fill="currentColor" opacity=".9"/>
        </svg>
        <div class="fine">&copy; 2025 HestiaTW.</div>
      </div>
      <div class="fine">Own Your Flame. · Ethereal Aura System</div>
    </div>
  </footer>

  <script type="module">
    // ===== Flashlight Reveal =====
    const mask = document.getElementById("cursor-light");
    const prefersReduced = window.matchMedia("(prefers-reduced-motion: reduce)").matches;

    if (!prefersReduced) {
      document.addEventListener("mousemove", (e) => {
        mask.style.setProperty("--x", `${e.clientX}px`);
        mask.style.setProperty("--y", `${e.clientY}px`);
      }, { passive: true });
    }

    // ===== Logo hover filter =====
    const logoSvg = document.querySelector(".logo-container svg");
    if (logoSvg) {
      logoSvg.addEventListener("mouseenter", () => logoSvg.style.filter = "url(#ethereal-flame)");
      logoSvg.addEventListener("mouseleave", () => logoSvg.style.filter = "none");
    }

    // ===== 4-7-8 Breath Widget (ring + text) =====
    const ring = document.querySelector(".ring-indicator");
    const breathText = document.getElementById("breathText");

    const CIRC = 2 * Math.PI * 18; // r=18
    const tIn = 4, tHold = 7, tOut = 8;
    const total = tIn + tHold + tOut;

    function setRingProgress(p){
      // p: 0..1 ; dashoffset 1->0 for "fill"
      const offset = CIRC * (1 - p);
      ring.style.strokeDasharray = String(CIRC);
      ring.style.strokeDashoffset = String(offset);
    }

    let start = performance.now();
    function tick(now){
      const elapsed = ((now - start) / 1000) % total;

      if (elapsed < tIn) {
        // Inhale: 0 -> 1
        const p = elapsed / tIn;
        setRingProgress(p);
        breathText.textContent = "Inhale";
      } else if (elapsed < tIn + tHold) {
        // Hold: stay 1
        setRingProgress(1);
        breathText.textContent = "Hold";
      } else {
        // Exhale: 1 -> 0
        const e = elapsed - (tIn + tHold);
        const p = 1 - (e / tOut);
        setRingProgress(Math.max(0, p));
        breathText.textContent = "Exhale";
      }

      if (!prefersReduced) requestAnimationFrame(tick);
    }
    if (!prefersReduced) requestAnimationFrame(tick);
    else { setRingProgress(0); breathText.textContent = "Breathe"; }

    // ===== Temperature Engine (scroll + click) =====
    const body = document.body;
    function applyTemp(temp){
      body.setAttribute("data-temp", temp || "cool");
    }

    // click to set temp immediately
    document.querySelectorAll("a[data-temp]").forEach(a => {
      a.addEventListener("click", () => applyTemp(a.dataset.temp));
    });

    // scroll-based (IntersectionObserver)
    const sections = [...document.querySelectorAll("section[data-temp]")];
    const io = new IntersectionObserver((entries) => {
      const visible = entries
        .filter(e => e.isIntersecting)
        .sort((a,b) => b.intersectionRatio - a.intersectionRatio)[0];
      if (visible) applyTemp(visible.target.dataset.temp);
    }, { threshold: [0.35, 0.55, 0.75] });

    sections.forEach(s => io.observe(s));

    // ===== Mobile menu =====
    const btn = document.getElementById("mobileMenuBtn");
    const drawer = document.getElementById("mobileDrawer");

    function setDrawer(open){
      drawer.classList.toggle("open", open);
      btn.setAttribute("aria-expanded", String(open));
    }
    if (btn && drawer) {
      btn.addEventListener("click", () => setDrawer(!drawer.classList.contains("open")));
      drawer.querySelectorAll("a").forEach(a => a.addEventListener("click", () => setDrawer(false)));
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") setDrawer(false);
      });
      document.addEventListener("click", (e) => {
        if (!drawer.contains(e.target) && !btn.contains(e.target)) setDrawer(false);
      }, { capture: true });
    }

    // ===== Simple tilt for cards (optional) =====
    const cards = document.querySelectorAll("[data-tilt]");
    cards.forEach(card => {
      let raf = 0;
      const max = 7; // degrees
      function onMove(e){
        const r = card.getBoundingClientRect();
        const x = (e.clientX - r.left) / r.width;  // 0..1
        const y = (e.clientY - r.top) / r.height;  // 0..1
        const rx = (y - 0.5) * -max;
        const ry = (x - 0.5) * max;

        cancelAnimationFrame(raf);
        raf = requestAnimationFrame(() => {
          card.style.transform = `translateY(-3px) rotateX(${rx}deg) rotateY(${ry}deg)`;
        });
      }
      function onLeave(){
        cancelAnimationFrame(raf);
        card.style.transform = "";
      }
      card.addEventListener("mousemove", onMove);
      card.addEventListener("mouseleave", onLeave);
      card.addEventListener("blur", onLeave);
    });

    // ===== Interference canvas (subtle grain lines) =====
    const canvas = document.getElementById("interference-canvas");
    const ctx = canvas.getContext("2d");

    function resize(){
      canvas.width = Math.floor(window.innerWidth * devicePixelRatio);
      canvas.height = Math.floor(window.innerHeight * devicePixelRatio);
    }
    function draw(){
      if (prefersReduced) return;
      ctx.clearRect(0,0,canvas.width,canvas.height);

      const w = canvas.width, h = canvas.height;
      const t = performance.now() * 0.001;

      // random faint scanlines
      ctx.globalAlpha = 0.22;
      for (let i = 0; i < 80; i++){
        const y = Math.floor((Math.sin(t*1.2 + i*0.55) * 0.5 + 0.5) * h);
        ctx.fillRect(0, y, w, 1 * devicePixelRatio);
      }

      // floating specks
      ctx.globalAlpha = 0.18;
      for (let i = 0; i < 120; i++){
        const x = (Math.sin(t*0.7 + i*1.7) * 0.5 + 0.5) * w;
        const y = (Math.cos(t*0.9 + i*1.3) * 0.5 + 0.5) * h;
        ctx.fillRect(x, y, 1.2*devicePixelRatio, 1.2*devicePixelRatio);
      }

      requestAnimationFrame(draw);
    }

    resize();
    window.addEventListener("resize", resize);
    if (!prefersReduced) requestAnimationFrame(draw);
  </script>
</body>
</html>
