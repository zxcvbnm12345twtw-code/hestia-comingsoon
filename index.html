<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <!-- Favicon -->
  <link rel="icon" href="/favicon.png" type="image/png" sizes="32x32" />
  <link rel="icon" href="/favicon.png" type="image/png" sizes="192x192" />
  <link rel="apple-touch-icon" href="/favicon.png" />
  <title>HESTIA TAIWAN｜健身休閒服飾</title>
  <meta name="description" content="HESTIA 健身時尚品牌，融合時尚與力量優雅，讓每個人穿出屬於自己的火焰。Own Your Flame.">
  <meta name="keywords" content="Hestia, 健身, 健身時尚服飾, 運動休閒服飾, 台灣品牌">
  <meta property="og:title" content="HESTIA TAIWAN｜健身時尚品牌">
  <meta property="og:description" content="Own Your Flame. 不只是運動，更是自我認同。">
  <meta property="og:url" content="https://www.hestiatw.com/">
  <meta property="og:type" content="website">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root{
      --accent:#E67690;
      --text: rgba(255,255,255,.86);
      --muted: rgba(255,255,255,.70);
      --hair: rgba(255,255,255,.12);
      --hair2: rgba(255,255,255,.08);

      /* 兩個展示框統一尺寸（以原 LOGO PAGE mark-stage 為基準） */
      --stage-size: min(210px, 72vw);
    }

    html,body{
      margin:0;padding:0;overflow-x:hidden;background:#000;color:var(--text);
      font-family:ui-sans-serif,-apple-system,"Segoe UI",Roboto,"Noto Sans TC","PingFang TC","Microsoft JhengHei",Arial,sans-serif;
    }

    section{
      min-height:100vh;
      display:flex;flex-direction:column;justify-content:center;align-items:center;
      padding:60px 20px;
      text-align:center;
      position:relative;
      z-index:1;
      scroll-margin-top: 8px;
    }

    h1,h2{margin:0 0 18px;color:#fff;}
    h1{font-size:clamp(32px,5vw,52px);}
    h2{font-size:clamp(24px,4vw,40px);}

    p{
      max-width:760px;
      font-size:clamp(16px,2vw,20px);
      line-height:1.72;
      margin:0 auto;
      color:var(--text);
    }

    .we-accent{color:var(--accent);text-shadow:0 0 22px rgba(230,118,144,.22);}

    /* ====== 背景分幕（沉靜版） ====== */
    .s1{background:linear-gradient(180deg,#000,#000);}
    .s2{background:linear-gradient(180deg,#000,#130b0f);}
    .s3{background:linear-gradient(180deg,#130b0f,#2a111a);}
    .s3b{background:linear-gradient(180deg,#2a111a,#3b1824);}
    .s4{background:linear-gradient(180deg,#3b1824,#4b1e2d);}
    .s5{background:linear-gradient(180deg,#4b1e2d,#6a3045);}

    /* ====== 全頁呼吸柔光（克制） ====== */
    .breath{
      position:fixed;inset:0;pointer-events:none;z-index:0;mix-blend-mode:screen;opacity:.11;
      background:
        radial-gradient(120% 120% at 50% 115%,rgba(230,118,144,.22) 0%,rgba(230,118,144,0) 70%),
        radial-gradient(140% 100% at 50% -10%,rgba(120,80,120,.13) 0%,rgba(120,80,120,0) 72%);
      animation:breathPulse 9s ease-in-out infinite alternate,breathDrift 28s ease-in-out infinite alternate;
      transform-origin: 50% 60%;
      will-change: transform, opacity;
    }
    @keyframes breathPulse{
      0%{opacity:.09;transform:scale(1);}
      50%{opacity:.13;transform:scale(1.02);}
      100%{opacity:.09;transform:scale(1);}
    }
    @keyframes breathDrift{
      0%{background-position:50% 115%,50% -10%;}
      100%{background-position:48% 105%,52% 0%;}
    }
    /* 章節切換「吸氣式」收縮：短暫、克制 */
    .breath.transition{
      animation: none;
      opacity: .12;
      transform: scale(.985);
      filter: saturate(1.02);
      transition: transform .58s cubic-bezier(.22,.61,.36,1), opacity .58s cubic-bezier(.22,.61,.36,1);
    }
    .breath.transition.release{
      opacity: .11;
      transform: scale(1);
    }

    /* ====== 柔粒覆層（grain） ====== */
    .grain{
      position:fixed;inset:0;pointer-events:none;z-index:1;
      opacity:.055;mix-blend-mode:overlay;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
      background-size: 240px 240px;
      transform: translateZ(0);
    }

    /* ====== 進場（WHO / FLAME MARK 還原） ====== */
    .reveal{
      opacity:0;
      transform:translateY(60px);
      transition:opacity .9s cubic-bezier(.22,.61,.36,1),transform .9s cubic-bezier(.22,.61,.36,1);
      will-change: opacity, transform;
      transition-delay: var(--d, 0ms);
    }
    .reveal.in{opacity:1;transform:none;}

    /* late（WHO / FLAME MARK：淡入 + 輕微下移） */
    .late{
      opacity:0;
      transform:translateY(8px);
      transition:opacity .9s cubic-bezier(.22,.61,.36,1),transform .9s cubic-bezier(.22,.61,.36,1);
      will-change: opacity, transform;
      transition-delay: var(--d, 0ms);
    }
    .late.in{opacity:1;transform:none;}

    /* ===== 共用：簡報式小標（不呆版） ===== */
    .kicker{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:8px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.04);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
      font-size:11px;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:rgba(255,255,255,.68);
    }

    /* ===== 章節編號（01/02/03...） ===== */
    .secno{
      font-size:11px;
      letter-spacing:.42em;
      text-transform:uppercase;
      color:rgba(255,255,255,.48);
      margin-bottom:10px;
      display:inline-flex;
      align-items:center;
      gap:10px;
      user-select:none;
    }
    .secno::before,.secno::after{
      content:"";
      width:34px;height:1px;
      background:rgba(255,255,255,.10);
    }

    /* ===== 髮絲線底線強調（關鍵詞） ===== */
    .hair-underline{
      display:inline-block;
      padding-bottom:2px;
      background-image: linear-gradient(transparent calc(100% - 1px), rgba(255,255,255,.22) 1px);
      background-repeat: no-repeat;
      background-size: 100% 100%;
    }

    /* ===== Hero ===== */
    .brand{
      display:flex;flex-direction:column;align-items:center;gap:8px;
      margin-bottom:10px;position:relative;z-index:2;width:100%;
    }
    .wordmark{
      display:block;margin:0 auto;width:clamp(260px,60vw,560px);
      filter:drop-shadow(0 10px 28px rgba(0,0,0,.52));
    }
    .submark{
      margin-top:-5px;
      letter-spacing:.36em;
      font-size:clamp(16px,2.2vw,30px);
      font-weight:450;
      opacity:.9;
      color:rgba(255,255,255,.86);
    }
    .tagline{
      margin-top:10px;
      font-weight:300;
      letter-spacing:.22em;
      font-size:clamp(14px,1.8vw,18px);
      color:rgba(255,255,255,.75);
      text-shadow:0 0 10px rgba(230,118,144,.22);
      animation:breatheText 7s ease-in-out infinite;
      position:relative;z-index:2;
    }
    @keyframes breatheText{ 0%,100%{opacity:.55;} 50%{opacity:.95;} }

    .arrow{
      font-size:22px;margin-top:14px;opacity:.72;
      animation:floatY 3.6s ease-in-out infinite;
      position:relative;z-index:2;
      color:rgba(255,255,255,.75);
      display:block;
      width:100%;
      text-align:center;
    }
    @keyframes floatY{ 0%,100%{transform:translateY(0);} 50%{transform:translateY(8px);} }

    /* 手機首屏定位：確保 tagline + arrow 絕對置中 */
    @media (max-width: 640px){
      .s1{ padding: 0 20px; }
      .s1 .brand{
        position:absolute;top:50%;left:50%;
        transform:translate(-50%,-58%);
        margin:0;width:100%;
      }
      .s1 .tagline,
      .s1 .arrow{
        position:absolute;
        left:50%;
        transform:translateX(-50%);
        margin:0;
        width:max-content;
        text-align:center;
      }
      .s1 .tagline{ bottom: calc(28vh - 10px); }
      .s1 .arrow{ bottom: calc(28vh - 33px - 10px); }
      .s1 .arrow{
        animation: breatheText 7s ease-in-out infinite, floatYKeepCenter 3.6s ease-in-out infinite;
      }
      @keyframes floatYKeepCenter{
        0%,100%{ transform:translateX(-50%) translateY(0); }
        50%    { transform:translateX(-50%) translateY(8px); }
      }
    }

    /* WHO / PURPOSE 標題 */
    .who-title, .purpose-title{
      font-size:clamp(36px,7vw,64px);
      line-height:1.08;
      letter-spacing:.04em;
      font-weight:700;
    }

    /* Purpose：靠中線淡入 + 圓形揭幕 */
    .purpose-title{
      opacity:0;transform:translateY(18px) scale(.985);
      transition:opacity .8s ease, transform .8s ease;
      text-shadow:0 10px 34px rgba(0,0,0,.46);
      position:relative;
      z-index:2;
    }
    .purpose-title.in{opacity:1;transform:none;}
    .clip-reveal{--r:0%;display:inline-block;clip-path:circle(var(--r) at 50% 50%);transition:clip-path .9s cubic-bezier(.22,.61,.36,1);}
    .clip-reveal.in{--r:120%;}

    /* Purpose 逐行（保留左右錯層 + blur） */
    .purpose-sub{max-width:560px;line-height:1.55;margin:18px auto 0; position:relative; z-index:2;}
    .purpose-sub p{font-size:clamp(15px,3.8vw,18px);color:rgba(255,255,255,.82);}
    .s3b .purpose-sub .late[data-late]{
      transform: translateY(70px) translateX(var(--x, 0));
      filter: blur(6px);
      transition: opacity .8s cubic-bezier(.22,.61,.36,1),
                 transform .8s cubic-bezier(.22,.61,.36,1),
                 filter .8s cubic-bezier(.22,.61,.36,1);
    }
    .s3b .purpose-sub .late.in{transform:none;filter:blur(0)}
    .s3b .purpose-sub .late[data-late]:nth-child(1){ --x:-10px; transition-delay:.06s;}
    .s3b .purpose-sub .late[data-late]:nth-child(2){ --x: 10px; transition-delay:.14s;}
    .s3b .purpose-sub .late[data-late]:nth-child(3){ --x:-8px; transition-delay:.22s;}

    /* ========== 章節點：非常小、白色、空心/實心、呼吸發亮 + Tooltip（hover/focus/長按） ========== */
    .dots{
      position:fixed;
      right:8px;
      top:50%;
      transform:translateY(-50%);
      display:flex;
      flex-direction:column;
      gap:12px;
      z-index:40;
      pointer-events:auto;
    }
    .dot{
      width:5px;height:5px;border-radius:50%;
      border:1px solid rgba(255,255,255,.62);
      background:transparent;
      padding:0;
      cursor:pointer;
      outline:none;
      appearance:none;
      -webkit-tap-highlight-color: transparent;
      transition: transform .18s ease, opacity .18s ease, background .18s ease, border-color .18s ease, box-shadow .18s ease;
      opacity:.60;
      position:relative;
    }
    .dot.active{
      opacity:1;
      background:#fff;
      border-color:#fff;
      box-shadow: 0 0 10px rgba(255,255,255,.55), 0 0 22px rgba(255,255,255,.28);
      animation: dotBreath 2.2s ease-in-out infinite;
    }
    @keyframes dotBreath{
      0%,100%{ box-shadow: 0 0 8px rgba(255,255,255,.38), 0 0 16px rgba(255,255,255,.18); transform: scale(1); }
      50%{     box-shadow: 0 0 12px rgba(255,255,255,.62), 0 0 26px rgba(255,255,255,.26); transform: scale(1.08); }
    }
    .dot:active{ transform: scale(1.15); }

    /* Tooltip */
    .dot::after{
      content: attr(data-label);
      position:absolute;
      right: 14px;
      top:50%;
      transform: translateY(-50%);
      padding:6px 8px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.55);
      box-shadow: 0 12px 40px rgba(0,0,0,.45);
      color: rgba(255,255,255,.84);
      font-size:11px;
      letter-spacing:.12em;
      white-space:nowrap;
      opacity:0;
      pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
      transform-origin: 100% 50%;
    }
    .dot:hover::after,
    .dot:focus-visible::after,
    .dot.showtip::after{
      opacity:1;
      transform: translateY(-50%) translateX(-2px);
    }

    /* 進度點一次性提示（首次滑動） */
    .dots.hint .dot{
      box-shadow: 0 0 0 rgba(255,255,255,0);
      animation: hintPulse 1.2s ease-in-out 1;
    }
    @keyframes hintPulse{
      0%{ opacity:.55; }
      40%{ opacity:1; box-shadow: 0 0 10px rgba(255,255,255,.22); }
      100%{ opacity:.60; box-shadow: 0 0 0 rgba(255,255,255,0); }
    }

    @media (max-width: 640px){
      .dot{ width:6px;height:6px; }
      .dot::after{ font-size:10px; padding:6px 8px; right:16px; }
    }

    /* ========== LOGO PAGE：原樣式（但會加 swap-to-flame 進場效果） ========== */
    .s3{ padding-top:70px; padding-bottom:70px; }
    .s3 .stack{
      width:min(760px, 92vw);
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:16px;
      text-align:center;
      position:relative;
      z-index:2;
    }

    .mark-stage{
      width: var(--stage-size);
      aspect-ratio: 1/1;
      display:grid;
      place-items:center;
      border-radius: 18px;
      background:
        radial-gradient(120% 120% at 50% 30%, rgba(255,255,255,.06), rgba(255,255,255,0) 60%),
        linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.10);
      box-shadow:
        0 16px 54px rgba(0,0,0,.55),
        inset 0 1px 0 rgba(255,255,255,.06);
      backdrop-filter: blur(6px);
      overflow:hidden;
      clip-path: circle(0% at 50% 48%);
      transition:
        clip-path 2.1s cubic-bezier(.22,.61,.36,1),
        transform .35s ease,
        box-shadow .45s ease,
        border-color .45s ease,
        background .55s ease;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      transform: translateY(0) scale(1);
      position:relative;
    }
    .mark-stage.in{ clip-path: circle(120% at 50% 48%); transition-delay: .32s; }

    .mark-stage:hover{
      border-color: rgba(255,255,255,.16);
      box-shadow:
        0 18px 64px rgba(0,0,0,.60),
        0 0 26px rgba(230,118,144,.12),
        inset 0 1px 0 rgba(255,255,255,.06);
      transform: translateY(-1px) scale(1.01);
    }
    .mark-stage:active{ transform: translateY(0) scale(.985); }

    .mark-stage.pulse{ animation: stagePulse .62s cubic-bezier(.22,.61,.36,1) both; }
    @keyframes stagePulse{
      0%   { transform: translateY(0) scale(1); }
      35%  { transform: translateY(-1px) scale(1.02); }
      100% { transform: translateY(0) scale(1); }
    }

    /* 以“極淡角落提示”取代文字（不影響 LOGO 呈現） */
    .corner-hint{
      position:absolute; inset:10px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.06);
      pointer-events:none;
      opacity:0;
      transition: opacity .55s ease;
      z-index:1;
    }
    .corner-hint::before,
    .corner-hint::after{
      content:"";
      position:absolute;
      width:10px;height:10px;
      border:1px solid rgba(255,255,255,.18);
      opacity:.35;
      border-right:none;border-bottom:none;
      border-radius:2px;
    }
    .corner-hint::before{ left:10px; top:10px; }
    .corner-hint::after{
      right:10px; bottom:10px;
      transform: rotate(180deg);
    }
    .mark-stage.in .corner-hint{ opacity:.9; }
    .mark-stage.hint .corner-hint{ animation: hintGlow 1.35s ease-in-out 1; }
    @keyframes hintGlow{
      0%{ opacity:.25; }
      45%{ opacity:1; }
      100%{ opacity:.9; }
    }

    /* 展品模式：Primary / Fabric / Mono（LOGO PAGE 仍保留互動） */
    .mark-stage[data-mode="fabric"]{
      background:
        radial-gradient(120% 120% at 50% 30%, rgba(255,255,255,.06), rgba(255,255,255,0) 60%),
        linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015)),
        repeating-linear-gradient(135deg, rgba(255,255,255,.02) 0 2px, rgba(0,0,0,0) 2px 6px);
    }
    .mark-stage[data-mode="mono"]{
      background:
        radial-gradient(120% 120% at 50% 30%, rgba(255,255,255,.05), rgba(255,255,255,0) 60%),
        linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
    }

    .logo-mark{
      width: clamp(110px, 26vw, 210px);
      opacity:0;
      transform: translateY(10px) scale(.92);
      transition: opacity 1.7s ease, transform 2.0s ease, filter 2.0s ease;
      transition-delay: .42s;
      filter: drop-shadow(0 14px 28px rgba(0,0,0,.66));
      will-change: opacity, transform, filter;
      position:relative;
      z-index:2;
    }
    .logo-mark.in{ opacity:1; transform: translateY(0) scale(.70); }

    .mark-stage[data-mode="mono"] .logo-mark{
      filter: grayscale(1) contrast(1.1) brightness(1.05) drop-shadow(0 14px 28px rgba(0,0,0,.66));
    }

    .logo-mark.pop{ animation: markPop .62s cubic-bezier(.22,.61,.36,1) both; }
    @keyframes markPop{
      0%   { filter: drop-shadow(0 14px 28px rgba(0,0,0,.66)); transform: translateY(0) scale(.70); }
      40%  { filter: drop-shadow(0 0 18px rgba(230,118,144,.18)); transform: translateY(-1px) scale(.73); }
      100% { filter: drop-shadow(0 14px 28px rgba(0,0,0,.66)); transform: translateY(0) scale(.70); }
    }

    .s3 .label{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      font-size:12px;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:rgba(255,255,255,.62);
      margin-top:2px;
    }
    .s3 .label::before{ content:none; }

    .s3 .bullets{
      width:min(640px, 92vw);
      margin-top:2px;
      display:grid;
      gap:10px;
      text-align:left;
    }
    .s3 .bullet{
      position:relative;
      padding-left:14px;
      color:rgba(255,255,255,.84);
      line-height:1.7;
      font-size:clamp(15px, 2.4vw, 18px);
    }
    .s3 .bullet::before{
      content:"";
      position:absolute;left:0;top:.72em;
      width:6px;height:6px;border-radius:50%;
      background:rgba(255,255,255,.80);
      box-shadow:0 0 0 3px rgba(255,255,255,.10);
    }
    .s3 .sig{
      width:min(640px, 92vw);
      margin-top:10px;
      padding-top:14px;
      border-top:1px solid rgba(255,255,255,.10);
      color:rgba(255,255,255,.66);
      font-size:13px;
      letter-spacing:.10em;
      text-align:left;
    }

    /* ========== WHO：資訊卡容器（不改 late 動畫） ========== */
    .info-card{
      width:min(720px, 92vw);
      margin-top:18px;
      padding:18px 16px;
      border-radius:18px;
      background: linear-gradient(180deg, rgba(255,255,255,.045), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.10);
      box-shadow: 0 18px 60px rgba(0,0,0,.45);
      backdrop-filter: blur(6px);
      position:relative;
      z-index:2;
    }
    .info-card .mini{
      margin-bottom:10px;
      display:flex;
      justify-content:center;
    }
    .info-card .mini .kicker{ transform: translateY(-2px); }

    /* ========== FLAME MARK：結構容器（展示框互換後仍保留外層） ========== */
    .flame-stage{
      position:relative;
      width:min(760px, 92vw);
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:14px;
      z-index:2;
    }

    /* flame-frame（基底：會被 swap-to-logo 改造成 mark-stage 風格） */
    .flame-frame{
      width: var(--stage-size);
      aspect-ratio: 1 / 1;
      border-radius: 22px;
      border:1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(140% 120% at 50% 0%, rgba(255,255,255,.055), rgba(255,255,255,.015) 62%),
        linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
      box-shadow: 0 22px 72px rgba(0,0,0,.46);
      backdrop-filter: blur(7px);
      display:grid;
      place-items:center;
      overflow:hidden;
      position:relative;
      clip-path: circle(0% at 50% 50%);
      transition: clip-path 2.35s cubic-bezier(.22,.61,.36,1);
    }
    .flame-frame.in{ clip-path: circle(120% at 50% 50%); }

    /* Flame Mark 圖（原本高級慢呈現） */
    .flame-img{
      width: clamp(120px, 26vw, 210px);
      margin:0;
      opacity:0;
      transform: translateY(10px) scale(.94);
      transition: opacity 1.9s ease, transform 2.2s ease, filter 2.4s ease;
      filter: drop-shadow(0 14px 30px rgba(0,0,0,.62));
      will-change: opacity, transform, filter;
      position:relative;
      z-index:2;
    }
    .flame-img.in{
      opacity:1;
      transform: translateY(0) scale(1);
      animation: flameBreath 8.8s ease-in-out infinite alternate;
    }
    @keyframes flameBreath{
      0%   { filter: drop-shadow(0 0 14px rgba(230,118,144,.14)); }
      100% { filter: drop-shadow(0 0 26px rgba(230,118,144,.22)); }
    }

    /* 宣言卡（維持） */
    .manifest{
      width:min(760px, 92vw);
      margin-top:0;
      padding:18px 16px;
      border-radius:18px;
      background: radial-gradient(120% 120% at 50% 0%, rgba(255,255,255,.05), rgba(255,255,255,.015) 60%),
                  linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.10);
      box-shadow: 0 18px 62px rgba(0,0,0,.46);
      backdrop-filter: blur(6px);
      position:relative;
      z-index:2;
    }

    /* JOIN：收尾頁細節 + 微文案 */
    .join-wrap{
      width:min(760px, 92vw);
      margin-top:16px;
      padding-top:18px;
      border-top:1px solid rgba(255,255,255,.10);
      position:relative;
      z-index:2;
    }
    .microcopy{
      margin-top:10px;
      font-size:12px;
      letter-spacing:.10em;
      color:rgba(255,255,255,.62);
    }

    form{
      margin-top:18px;
      display:flex;flex-wrap:wrap;gap:12px;
      justify-content:center;
      position:relative;z-index:2;
    }
    input[type="email"]{
      padding:12px 20px;border-radius:12px;
      border:1px solid rgba(255,255,255,.16);
      min-width:240px;font-size:16px;color:#222;background:#fff;outline:none;
    }
    button{
      padding:12px 22px;border:none;border-radius:12px;
      font-weight:700;font-size:16px;color:#fff;background:var(--accent);
      cursor:pointer;transition:background .42s;
    }
    button:hover{background:#cf5b79;}

    .links{display:flex;gap:18px;justify-content:center;margin-top:14px;position:relative;z-index:2;}
    .links a{color:rgba(255,255,255,.86);text-decoration:none;border-bottom:1px solid rgba(255,255,255,.22);padding-bottom:2px;}

    .toast{
      position:fixed;left:50%;bottom:28px;transform:translateX(-50%);
      background:rgba(0,0,0,.74);
      padding:12px 18px;border-radius:12px;
      font-size:14px;box-shadow:0 10px 40px rgba(0,0,0,.45);
      opacity:0;pointer-events:none;transition:opacity .28s ease;
      z-index:99;
      color:rgba(255,255,255,.88);
    }
    .toast.show{opacity:1;}

    /* ========== OUR PURPOSE：儀式感卡片 + chips 主動展示動畫 ========== */
    .purpose-wrap{
      position:relative;
      width:min(760px, 92vw);
      padding:22px 18px 18px;
      border-radius:22px;
      border:1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(140% 120% at 50% 0%, rgba(255,255,255,.055), rgba(255,255,255,.015) 60%),
        linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
      box-shadow: 0 22px 72px rgba(0,0,0,.46);
      backdrop-filter: blur(7px);
      overflow:hidden;
      z-index:2;
    }
    .purpose-wrap::before{
      content:"";
      position:absolute;inset:0;
      background:
        radial-gradient(18px 18px at 16% 22%, rgba(255,255,255,.06), rgba(255,255,255,0) 70%),
        radial-gradient(22px 22px at 82% 68%, rgba(255,255,255,.05), rgba(255,255,255,0) 72%),
        linear-gradient(90deg, rgba(255,255,255,.06), rgba(255,255,255,0) 28%, rgba(255,255,255,0) 72%, rgba(255,255,255,.05));
      opacity:.55;
      pointer-events:none;
    }
    .purpose-wrap::after{
      content:"";
      position:absolute;inset:14px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.06);
      pointer-events:none;
      opacity:.85;
    }
    .purpose-kicker{
      display:flex;
      justify-content:center;
      margin-bottom:10px;
      position:relative;
      z-index:2;
    }

    .purpose-chips{
      margin-top:14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:center;
      position:relative;
      z-index:2;
    }
    .chip{
      padding:8px 11px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.22);
      color:rgba(255,255,255,.78);
      font-size:12px;
      letter-spacing:.14em;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      transition: transform .22s ease, opacity .22s ease, border-color .22s ease, box-shadow .22s ease, background .22s ease;
      position:relative;
      overflow:hidden;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      min-width: 116px;
    }
    .chip:active{ transform: scale(.985); }

    .chip.dim{ opacity:.45; border-color: rgba(255,255,255,.10); }
    .chip.active{
      opacity:1;
      border-color: rgba(255,255,255,.18);
      box-shadow: 0 0 16px rgba(230,118,144,.12);
      animation: chipBreath 1.1s ease-in-out infinite;
    }
    @keyframes chipBreath{
      0%,100%{ box-shadow: 0 0 10px rgba(230,118,144,.10); }
      50%{ box-shadow: 0 0 18px rgba(230,118,144,.16); }
    }

    .chip .t{
      display:block;
      transition: opacity .22s ease, transform .22s ease;
      will-change: opacity, transform;
      white-space:nowrap;
    }
    .chip.swap .t{ opacity:0; transform: translateY(6px); }
    .chip .t.in{ opacity:1; transform:none; }

    .chip.auto{ transition-duration: .35s; }

    /* 無障礙：偏好減少動態 */
    @media (prefers-reduced-motion: reduce){
      .breath, .grain, .chip.active, .dot.active, .flame-img.in{ animation:none !important; }
      .reveal, .late, .chip .t, .flame-frame{ transition:none !important; }
    }

    /* =======================================================================
       互換特效：LOGO PAGE <-> FLAME MARK
       ======================================================================= */

    /* 統一展框尺寸：mark-stage 與 flame-frame 都用同一套（保險） */
    .mark-stage,
    .flame-frame{
      width: var(--stage-size) !important;
      aspect-ratio: 1/1;
    }

    /* ===== LOGO PAGE 改用 FLAME 的「展櫃揭幕 + sheen 打光掃過」特效 ===== */
    .mark-stage.swap-to-flame{
      clip-path: circle(0% at 50% 50%);
      transition: clip-path 2.35s cubic-bezier(.22,.61,.36,1),
                  transform .35s ease,
                  box-shadow .45s ease,
                  border-color .45s ease,
                  background .55s ease;
    }
    .mark-stage.swap-to-flame.in{
      clip-path: circle(120% at 50% 50%);
    }

    /* 打光掃過（sheen） */
    .mark-stage.swap-to-flame::before{
      content:"";
      position:absolute;
      inset:-40%;
      background: linear-gradient(90deg, rgba(255,255,255,0) 35%, rgba(255,255,255,.07) 50%, rgba(255,255,255,0) 65%);
      transform: translateX(-35%) rotate(12deg);
      opacity:0;
      pointer-events:none;
    }
    .mark-stage.swap-to-flame.sheen::before{
      opacity:1;
      animation: sheenSweep 2.8s cubic-bezier(.22,.61,.36,1) 1 both;
    }
    @keyframes sheenSweep{
      0%{ transform: translateX(-35%) rotate(12deg); }
      100%{ transform: translateX(35%) rotate(12deg); }
    }

    /* LOGO 圖改為像 flame-img 的慢淡入節奏 */
    .logo-mark.swap-to-flame{
      opacity:0;
      transform: translateY(10px) scale(.94);
      transition: opacity 1.9s ease, transform 2.2s ease, filter 2.4s ease;
      will-change: opacity, transform, filter;
    }
    .logo-mark.swap-to-flame.in{
      opacity:1;
      transform: translateY(0) scale(.70);
      animation: flameBreath 8.8s ease-in-out infinite alternate;
    }

    /* ===== FLAME MARK 改用 LOGO 的「mark-stage」互動特效（模式切換 + corner hint） ===== */
    .flame-frame.swap-to-logo{
      border-radius: 18px;
      background:
        radial-gradient(120% 120% at 50% 30%, rgba(255,255,255,.06), rgba(255,255,255,0) 60%),
        linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.10);
      box-shadow:
        0 16px 54px rgba(0,0,0,.55),
        inset 0 1px 0 rgba(255,255,255,.06);
      backdrop-filter: blur(6px);
      overflow:hidden;
      clip-path: circle(0% at 50% 48%);
      transition:
        clip-path 2.1s cubic-bezier(.22,.61,.36,1),
        transform .35s ease,
        box-shadow .45s ease,
        border-color .45s ease,
        background .55s ease;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      position:relative;
    }
    .flame-frame.swap-to-logo.in{
      clip-path: circle(120% at 50% 48%);
      transition-delay:.32s;
    }
    .flame-frame.swap-to-logo:hover{
      border-color: rgba(255,255,255,.16);
      box-shadow:
        0 18px 64px rgba(0,0,0,.60),
        0 0 26px rgba(230,118,144,.12),
        inset 0 1px 0 rgba(255,255,255,.06);
      transform: translateY(-1px) scale(1.01);
    }
    .flame-frame.swap-to-logo:active{ transform: translateY(0) scale(.985); }
    .flame-frame.swap-to-logo.pulse{ animation: stagePulse .62s cubic-bezier(.22,.61,.36,1) both; }

    .flame-frame.swap-to-logo[data-mode="fabric"]{
      background:
        radial-gradient(120% 120% at 50% 30%, rgba(255,255,255,.06), rgba(255,255,255,0) 60%),
        linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015)),
        repeating-linear-gradient(135deg, rgba(255,255,255,.02) 0 2px, rgba(0,0,0,0) 2px 6px);
    }
    .flame-frame.swap-to-logo[data-mode="mono"]{
      background:
        radial-gradient(120% 120% at 50% 30%, rgba(255,255,255,.05), rgba(255,255,255,0) 60%),
        linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
    }

    /* flame 圖像在互動時 pop（沿用 markPop） */
    .flame-img.swap-to-logo{
      opacity:0;
      transform: translateY(10px) scale(.92);
      transition: opacity 1.7s ease, transform 2.0s ease, filter 2.0s ease;
      transition-delay:.42s;
      filter: drop-shadow(0 14px 28px rgba(0,0,0,.66));
    }
    .flame-img.swap-to-logo.in{
      opacity:1;
      transform: translateY(0) scale(1);
      animation: none; /* 改回更像“標誌展品”，不要一直呼吸 */
    }
    .flame-frame.swap-to-logo[data-mode="mono"] .flame-img{
      filter: grayscale(1) contrast(1.1) brightness(1.05) drop-shadow(0 14px 28px rgba(0,0,0,.66));
    }
    .flame-img.pop{ animation: markPop .62s cubic-bezier(.22,.61,.36,1) both; }
  </style>
</head>

<body>
  <div class="breath" id="breath" aria-hidden="true"></div>
  <div class="grain" aria-hidden="true"></div>

  <!-- 章節進度點 -->
  <nav class="dots" id="dotsNav" aria-label="Section navigation">
    <button class="dot" data-target="s1" data-label="HERO" aria-label="Go to Hero"></button>
    <button class="dot" data-target="s2" data-label="WHO WE ARE" aria-label="Go to Who We Are"></button>
    <button class="dot" data-target="s3" data-label="PRIMARY MARK" aria-label="Go to Mark"></button>
    <button class="dot" data-target="s3b" data-label="OUR PURPOSE" aria-label="Go to Purpose"></button>
    <button class="dot" data-target="s4" data-label="FLAME MARK" aria-label="Go to Flame Mark"></button>
    <button class="dot" data-target="s5" data-label="JOIN US" aria-label="Go to Join"></button>
  </nav>

  <!-- ① Hero -->
  <section class="s1" id="s1">
    <div class="brand">
      <img class="wordmark reveal in" src="wordmark.png" alt="HESTIA wordmark" />
      <div class="submark">TAIWAN</div>
    </div>
    <div class="tagline">即將到來</div>
    <div class="arrow">↓</div>
  </section>

  <!-- ② WHO WE ARE -->
  <section class="s2" id="s2">
    <div class="secno reveal" style="--d:120ms;">02</div>
    <h2 class="reveal in who-title" style="--d:160ms;">WHO <span class="we-accent">WE</span> ARE?</h2>

    <div class="info-card">
      <div class="mini"><span class="kicker reveal in">WHY HESTIA?</span></div>
      <p class="late" data-late>HESTIA的名字來自希臘神話中守護火爐的女神，</p>
      <p class="late" data-late>象徵<span class="hair-underline">歸屬</span>、<span class="hair-underline">溫暖</span>與內在之火。</p>
      <p class="late" data-late>我們相信，每個人心中都有一簇火焰，</p>
      <p class="late" data-late>等待被看見、被擁抱、被點燃。</p>
    </div>
  </section>

  <!-- ③ LOGO PAGE -->
  <section class="s3" id="s3">
    <div class="stack">
      <div class="secno reveal" style="--d:140ms;">03</div>

      <!-- 互換：LOGO 用展櫃揭幕 + sheen -->
      <div class="mark-stage swap-to-flame" id="markStage" role="button" aria-label="Interact with brand mark" tabindex="0" data-mode="primary">
        <div class="corner-hint" aria-hidden="true"></div>
        <img class="logo-mark swap-to-flame" id="logoMark" src="Hlogo.png" alt="HESTIA mark" />
      </div>

      <div class="label reveal" style="--d:220ms;">PRIMARY MARK</div>
      <h2 class="reveal" style="--d:260ms;">品牌識別</h2>

      <div class="bullets">
        <div class="bullet reveal" style="--d:320ms;">LOGO靈感來自「火焰燃燒的線條」，帶出<span class="hair-underline">力量</span>與<span class="hair-underline">節制</span>的平衡。</div>
        <div class="bullet reveal" style="--d:380ms;">拱型外型呼應爐灶女神的意象，象徵<span class="hair-underline">歸屬</span>、<span class="hair-underline">溫暖</span>與內在之火。</div>
        <div class="bullet reveal" style="--d:440ms;">代表力量與柔韌的平衡，也象徵身體與心靈的統一。</div>
      </div>

      <div class="sig reveal" style="--d:520ms;">HESTIA的主標識，將在服裝等所有核心視覺中作為第一辨識。</div>
    </div>
  </section>

  <!-- ③.5 Our Purpose -->
  <section class="s3b" id="s3b">
    <div class="secno reveal" style="--d:140ms;">04</div>

    <div class="purpose-wrap">
      <div class="purpose-kicker"><span class="kicker reveal" style="--d:180ms;">我們希望</span></div>

      <h2 class="purpose-title clip-reveal" id="purposeTitle">
        <span class="we-accent">Our</span> Purpose
      </h2>

      <div class="purpose-sub">
        <p class="late" data-late>每一個特質，都是值得擁抱的亮點。</p>
        <p class="late" data-late>HESTIA 不只是為了做服裝，</p>
        <p class="late" data-late>而是讓日常成為你<span class="hair-underline">自我認同</span>的象徵。</p>
      </div>

      <div class="purpose-chips" id="purposeChips">
        <span class="chip auto" role="button" tabindex="0" data-en="IDENTITY" data-zh="自我認同"><span class="t in">IDENTITY</span></span>
        <span class="chip auto" role="button" tabindex="0" data-en="CONFIDENCE" data-zh="自信力量"><span class="t in">CONFIDENCE</span></span>
        <span class="chip auto" role="button" tabindex="0" data-en="BELONGING" data-zh="歸屬感"><span class="t in">BELONGING</span></span>
      </div>
    </div>
  </section>

  <!-- ④ THE FLAME MARK -->
  <section class="s4" id="s4">
    <div class="secno reveal" style="--d:140ms;">05</div>

    <div class="flame-stage">
      <!-- 互換：FLAME 用 mark-stage 的互動/模式切換 + corner hint -->
      <div class="flame-frame swap-to-logo" id="flameFrame" role="button" aria-label="Interact with flame mark" tabindex="0" data-mode="primary">
        <div class="corner-hint" aria-hidden="true"></div>
        <img class="flame-img swap-to-logo" id="flameImg" src="Flamemark.png" alt="The Flame Mark">
      </div>

      <div class="manifest">
        <div style="display:flex;justify-content:center;margin-bottom:10px;">
          <span class="kicker reveal" style="--d:200ms;">THE FLAME MARK</span>
        </div>

        <h2 class="late" data-late style="margin-bottom:12px;">標語的符號</h2>
        <p class="late" data-late>
          這不只是口號，而是一種信念。<br>
          標籤又如何？那是與生俱來的特色。<br>
          HESTIA 透過「Own Your Flame」<br>
          無論性別、身形、背景，這些火焰屬於你自己。<br>
          不用變成誰，你只需要更像你。
        </p>
      </div>
    </div>
  </section>

  <!-- ⑤ JOIN US -->
  <section class="s5" id="s5">
    <h2 class="reveal">JOIN US</h2>
    <p class="reveal">加入HESTIA TAIWAN，搶先收到最新消息與限定優惠。</p>

    <div class="join-wrap">
      <div class="microcopy reveal" style="--d:220ms;">我們將很快開始，立即行動！</div>

      <form id="notify"
            action="https://docs.google.com/forms/d/e/1FAIpQLSfmk4ZgMlWpAbFKa6x1JNAq0hwn6kzXtOoB9e9nIbZxsAuNTA/formResponse"
            method="POST" target="hidden_iframe" autocomplete="off" onsubmit="return submitGForm(event)">
        <input id="email" type="email" name="entry.345729382" placeholder="輸入 Email 訂閱" required />
        <button type="submit">立即訂閱</button>
      </form>

      <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>

      <div class="links reveal">
        <a href="https://www.instagram.com/hestia.taiwan/" target="_blank" rel="noopener">Instagram</a>
        <a href="https://lin.ee/kjso8Ba" target="_blank" rel="noopener">LINE 官方帳號</a>
      </div>
    </div>
  </section>

  <div class="toast" id="toast">訂閱成功！我們將在第一時間通知你最新消息。</div>

  <script>
    /* reveal：只管 .reveal（LOGO/FLAME 的進場由各自 IO 控制，避免 timing 錯位） */
    const observer = new IntersectionObserver(entries=>{
      entries.forEach(e=>{
        if(e.isIntersecting) e.target.classList.add('in');
      });
    },{threshold:.22});

    document.querySelectorAll('.reveal').forEach(el=>{
      if(!el.classList.contains('in')) observer.observe(el);
    });

    /* late：WHO + FLAME MARK 文字；排除 Purpose 小標（交由 handlePurpose 控制） */
    const lateObserver = new IntersectionObserver(entries=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          e.target.classList.add('in');
          lateObserver.unobserve(e.target);
        }
      });
    },{rootMargin:'-5% 0px -40% 0px',threshold:0});

    document.querySelectorAll('.late[data-late]').forEach(el=>{
      if(!el.closest('.purpose-sub')) lateObserver.observe(el);
    });

    /* =====================================================================
       LOGO PAGE（互換後）：進場用「展櫃揭幕 + sheen」；點擊仍保留三模式切換
       ===================================================================== */
    const stage = document.getElementById('markStage');
    const mark  = document.getElementById('logoMark');
    const modes = ['primary','fabric','mono'];
    let modeIdx = 0;

    function popOnce(){
      stage.classList.remove('pulse');
      mark.classList.remove('pop');
      void stage.offsetWidth;
      stage.classList.add('pulse');
      mark.classList.add('pop');
    }
    function cycleMode(){
      modeIdx = (modeIdx + 1) % modes.length;
      stage.setAttribute('data-mode', modes[modeIdx]);
      popOnce();
    }

    stage.addEventListener('click', cycleMode);
    stage.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' || e.key === ' '){
        e.preventDefault();
        cycleMode();
      }
    });

    /* 角落提示：只在第一次看見 LOGO PAGE 時呼吸一次 */
    let logoHinted = false;
    const logoHintObserver = new IntersectionObserver(entries=>{
      entries.forEach(e=>{
        if(e.isIntersecting && !logoHinted){
          logoHinted = true;
          stage.classList.add('hint');
          setTimeout(()=>stage.classList.remove('hint'), 1450);
          logoHintObserver.unobserve(stage);
        }
      });
    },{threshold: .35});
    logoHintObserver.observe(stage);

    /* LOGO PAGE：進場揭幕 + 慢亮出 LOGO + 打光掃過（sheen） */
    const logoIO = new IntersectionObserver(entries=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          stage.classList.add('in');
          setTimeout(()=>mark.classList.add('in'), 520);
          setTimeout(()=>stage.classList.add('sheen'), 1050);
          logoIO.unobserve(e.target);
        }
      });
    },{threshold:.35});
    logoIO.observe(stage);

    /* =====================================================================
       表單無跳轉
       ===================================================================== */
    const toast = document.getElementById('toast');
    const iframe = document.getElementById('hidden_iframe');
    let submittedAt = 0;

    function submitGForm(e){
      const input = document.getElementById('email');
      const email = (input.value||'').trim();
      if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){
        alert('請輸入有效的 Email');
        return false;
      }
      submittedAt = Date.now();
      return true;
    }

    iframe.addEventListener('load',()=>{
      if(Date.now()-submittedAt<300) return;
      document.getElementById('email').value='';
      toast.classList.add('show');
      setTimeout(()=>toast.classList.remove('show'),2600);
    });

    /* =====================================================================
       Our Purpose：靠近畫面中線才淡入（維持原邏輯）
       ===================================================================== */
    const purposeSection = document.querySelector('.s3b');
    const purposeTitleEl = document.getElementById('purposeTitle');
    const purposeSubEls = purposeSection.querySelectorAll('.purpose-sub .late[data-late]');
    let purposeTitleShown = false;
    let purposeSubShown = false;

    function handlePurpose(){
      if(!purposeSection || !purposeTitleEl) return;
      const rect = purposeSection.getBoundingClientRect();
      const vh = window.innerHeight;

      const sectionCenter = rect.top + rect.height / 2;
      const viewportCenter = vh / 2;
      const delta = Math.abs(sectionCenter - viewportCenter) / vh;

      if(!purposeTitleShown && delta < 0.18 && rect.top < vh && rect.bottom > 0){
        purposeTitleEl.classList.add('in');
        purposeTitleShown = true;
      }

      if(!purposeSubShown && purposeTitleShown && sectionCenter < viewportCenter - vh * 0.10){
        purposeSubEls.forEach(el=>el.classList.add('in'));
        purposeSubShown = true;
      }
    }
    window.addEventListener('scroll', handlePurpose, {passive:true});
    window.addEventListener('load', handlePurpose);
    window.addEventListener('resize', handlePurpose);

    const purposeIO = new IntersectionObserver(entries=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          purposeTitleEl.classList.add('in');
          purposeTitleShown = true;
          purposeIO.unobserve(e.target);
        }
      });
    },{root:null,rootMargin:'-35% 0px -35% 0px',threshold:0});
    purposeIO.observe(purposeTitleEl);

    /* OUR PURPOSE：chips 主動展示動畫（自動輪播中英切換） */
    const chipsWrap = document.getElementById('purposeChips');
    const chips = Array.from(chipsWrap.querySelectorAll('.chip'));
    let autoTimer = null;
    let autoIdx = 0;
    let autoRunning = false;

    function swapText(chip){
      const t = chip.querySelector('.t');
      const current = chip.dataset.lang || 'en';
      const next = (current === 'en') ? 'zh' : 'en';
      const nextText = (next === 'en') ? chip.dataset.en : chip.dataset.zh;

      chip.classList.add('swap');
      t.classList.remove('in');

      setTimeout(()=>{
        t.textContent = nextText;
        chip.dataset.lang = next;
        requestAnimationFrame(()=>t.classList.add('in'));
        chip.classList.remove('swap');
      }, 190);
    }

    function focusChip(chip){
      chips.forEach(c=>{
        c.classList.toggle('dim', c !== chip);
        c.classList.toggle('active', c === chip);
      });
      swapText(chip);

      setTimeout(()=>{
        chips.forEach(c=>c.classList.remove('dim','active'));
      }, 1400);
    }

    function runAuto(){
      if(autoRunning) return;
      autoRunning = true;
      autoTimer = setInterval(()=>{
        const chip = chips[autoIdx % chips.length];
        focusChip(chip);
        autoIdx++;
      }, 2200);
    }

    function stopAuto(){
      autoRunning = false;
      if(autoTimer) clearInterval(autoTimer);
      autoTimer = null;
    }

    const purposeAutoIO = new IntersectionObserver(entries=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          runAuto();
        }else{
          stopAuto();
        }
      });
    },{threshold:.35});
    purposeAutoIO.observe(purposeSection);

    let manualCooldown = null;
    chips.forEach(chip=>{
      chip.addEventListener('click', ()=>{
        stopAuto();
        focusChip(chip);
        if(manualCooldown) clearTimeout(manualCooldown);
        manualCooldown = setTimeout(()=>runAuto(), 6000);
      });
      chip.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter' || e.key === ' '){
          e.preventDefault();
          stopAuto();
          focusChip(chip);
          if(manualCooldown) clearTimeout(manualCooldown);
          manualCooldown = setTimeout(()=>runAuto(), 6000);
        }
      });
    });

    /* =====================================================================
       FLAME MARK（互換後）：用 mark-stage 的互動/模式切換 + corner hint
       ===================================================================== */
    const flameFrame = document.getElementById('flameFrame');
    const flameImg   = document.getElementById('flameImg');
    const flameModes = ['primary','fabric','mono'];
    let flameModeIdx = 0;

    function flamePop(){
      flameFrame.classList.remove('pulse');
      flameImg.classList.remove('pop');
      void flameFrame.offsetWidth;
      flameFrame.classList.add('pulse');
      flameImg.classList.add('pop');
    }

    function cycleFlameMode(){
      flameModeIdx = (flameModeIdx + 1) % flameModes.length;
      flameFrame.setAttribute('data-mode', flameModes[flameModeIdx]);
      flamePop();
    }

    flameFrame.addEventListener('click', cycleFlameMode);
    flameFrame.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' || e.key === ' '){
        e.preventDefault();
        cycleFlameMode();
      }
    });

    /* FLAME：進場揭幕（mark-stage 的 circle reveal 節奏） */
    const flameStageIO = new IntersectionObserver(entries=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          flameFrame.classList.add('in');
          setTimeout(()=>flameImg.classList.add('in'), 520);
          flameStageIO.unobserve(e.target);
        }
      });
    },{threshold:.28});
    flameStageIO.observe(flameFrame);

    /* FLAME corner-hint：只提示一次 */
    let flameHinted = false;
    const flameHintIO = new IntersectionObserver(entries=>{
      entries.forEach(e=>{
        if(e.isIntersecting && !flameHinted){
          flameHinted = true;
          flameFrame.classList.add('hint');
          setTimeout(()=>flameFrame.classList.remove('hint'), 1450);
          flameHintIO.unobserve(flameFrame);
        }
      });
    },{threshold:.35});
    flameHintIO.observe(flameFrame);

    /* =====================================================================
       章節點：高亮目前章節 + 點擊跳轉 + 「吸氣式」過場
       ===================================================================== */
    const breath = document.getElementById('breath');
    const sections = ['s1','s2','s3','s3b','s4','s5'].map(id=>document.getElementById(id));
    const dots = Array.from(document.querySelectorAll('.dot'));

    function setActiveDot(idx){
      dots.forEach((d,i)=>d.classList.toggle('active', i===idx));
    }

    let lastActive = 0;
    const sectionObserver = new IntersectionObserver(()=>{
      const vh = window.innerHeight;
      let best = {idx:0, score:999999};
      sections.forEach((sec, idx)=>{
        const r = sec.getBoundingClientRect();
        const center = r.top + r.height/2;
        const score = Math.abs(center - vh/2);
        if(score < best.score) best = {idx, score};
      });
      setActiveDot(best.idx);

      if(best.idx !== lastActive){
        breath.classList.add('transition');
        requestAnimationFrame(()=>{
          breath.classList.add('release');
          setTimeout(()=>breath.classList.remove('transition','release'), 620);
        });
        lastActive = best.idx;
      }
    },{threshold:0.01});

    sections.forEach(sec=>sectionObserver.observe(sec));
    setActiveDot(0);

    dots.forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const id = btn.getAttribute('data-target');
        const target = document.getElementById(id);
        if(!target) return;
        target.scrollIntoView({behavior:'smooth', block:'start'});
      }, {passive:true});
    });

    /* 章節點 tooltip：長按顯示（mobile-friendly） */
    let pressTimer = null;
    dots.forEach(dot=>{
      const show = ()=>{
        dot.classList.add('showtip');
        setTimeout(()=>dot.classList.remove('showtip'), 900);
      };

      dot.addEventListener('pointerdown', ()=>{
        pressTimer = setTimeout(show, 250);
      });
      dot.addEventListener('pointerup', ()=>{ if(pressTimer) clearTimeout(pressTimer); });
      dot.addEventListener('pointercancel', ()=>{ if(pressTimer) clearTimeout(pressTimer); });
      dot.addEventListener('pointerleave', ()=>{ if(pressTimer) clearTimeout(pressTimer); });
    });

    /* 首次滑動：進度點做一次微亮提示 */
    const dotsNav = document.getElementById('dotsNav');
    let hinted = false;
    function onFirstScroll(){
      if(hinted) return;
      hinted = true;
      dotsNav.classList.add('hint');
      setTimeout(()=>dotsNav.classList.remove('hint'), 1200);
      window.removeEventListener('scroll', onFirstScroll, {passive:true});
    }
    window.addEventListener('scroll', onFirstScroll, {passive:true});
  </script>
</body>
</html>
