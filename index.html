<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <!-- Favicon -->
  <link rel="icon" href="/favicon.png" type="image/png" sizes="32x32" />
  <link rel="icon" href="/favicon.png" type="image/png" sizes="192x192" />
  <link rel="apple-touch-icon" href="/favicon.png" />

  <title>HESTIA TAIWAN｜健身休閒服飾</title>
  <meta name="description" content="HESTIA 健身時尚品牌，融合時尚與力量優雅，讓每個人穿出屬於自己的火焰。Own Your Flame.">
  <meta name="keywords" content="Hestia, 健身, 健身時尚服飾, 運動休閒服飾, 台灣品牌">
  <meta property="og:title" content="HESTIA TAIWAN｜健身時尚品牌">
  <meta property="og:description" content="Own Your Flame. 不只是運動，更是自我認同。">
  <meta property="og:url" content="https://www.hestiatw.com/">
  <meta property="og:type" content="website">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root{
      --accent:#E67690;
      --text: rgba(255,255,255,.86);
      --muted: rgba(255,255,255,.70);
      --hair: rgba(255,255,255,.12);
      --hair2: rgba(255,255,255,.08);

      --sanctuary-1:#130b0f;
      --sanctuary-2:#2a111a;
      --sanctuary-3:#3b1824;
      --sanctuary-4:#4b1e2d;
      --sanctuary-5:#6a3045;

      --breath-a: rgba(230,118,144,.22);
      --breath-b: rgba(120,80,120,.13);

      --wrap: 760px;
    }

    *{ box-sizing:border-box; }

    html,body{
      margin:0;padding:0;overflow-x:hidden;background:#000;color:var(--text);
      font-family:ui-sans-serif,-apple-system,"Segoe UI",Roboto,"Noto Sans TC","PingFang TC","Microsoft JhengHei",Arial,sans-serif;
    }

    body{ transition: background-color 1.2s ease; }

    /* 初始（無 data-theme）＝無彩黑白灰，不帶任何預設底色傾向 */
    body:not([data-theme]),
    body[data-theme=""],
    body[data-theme="mono_base"]{
      --sanctuary-1:#000000;
      --sanctuary-2:#070707;
      --sanctuary-3:#0d0d0d;
      --sanctuary-4:#121212;
      --sanctuary-5:#171717;

      --breath-a: rgba(255,255,255,.10);
      --breath-b: rgba(255,255,255,.06);

      --accent:#ffffff;
    }

    /* =========================
       PRETONE（僅在 mono_base / 空主題時生效；06 選到 data-theme 後由主題接管）
    ========================== */
    .s1b{ background: linear-gradient(180deg,#000,var(--sanctuary-1)); }

    .pretone-grid{
      margin-top:16px;
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap:10px;
    }
    @media (min-width: 760px){
      .pretone-grid{ grid-template-columns: repeat(5, minmax(0,1fr)); }
    }

    .pretone{
      display:flex;
      align-items:center;
      gap:10px;
      width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      color: rgba(255,255,255,.86);
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
      transition: transform .18s ease, border-color .18s ease, background .18s ease, box-shadow .18s ease, opacity .18s ease;
    }
    .pretone:active{ transform: scale(.99); }
    .pretone .chip{
      width:14px;height:14px;border-radius:50%;
      border:1px solid rgba(255,255,255,.18);
      box-shadow: 0 0 0 3px rgba(255,255,255,.04);
      flex:0 0 auto;
    }
    .pretone .nm{
      font-size:13px;
      letter-spacing:.14em;
      font-weight:800;
    }
    .pretone .hx{
      margin-left:auto;
      font-size:11px;
      letter-spacing:.10em;
      color: rgba(255,255,255,.62);
    }
    .pretone.active{
      border-color: rgba(255,255,255,.22);
      background: rgba(255,255,255,.06);
      box-shadow: 0 0 18px rgba(255,255,255,.10);
    }

    /* ✅ PRETONE 明顯反饋 */
    .pretone-flash{
      animation: pretoneFlash .72s cubic-bezier(.22,.61,.36,1) 1;
    }
    @keyframes pretoneFlash{
      0%{
        transform: translateY(0) scale(1);
        box-shadow: 0 22px 72px rgba(0,0,0,.46);
        filter: saturate(1);
      }
      40%{
        transform: translateY(-1px) scale(1.01);
        box-shadow:
          0 26px 92px rgba(0,0,0,.58),
          0 0 34px rgba(255,255,255,.10),
          0 0 34px color-mix(in srgb, var(--accent) 55%, transparent);
        filter: saturate(1.06);
      }
      100%{
        transform: translateY(0) scale(1);
        box-shadow: 0 22px 72px rgba(0,0,0,.46);
        filter: saturate(1);
      }
    }

    /* 只在「尚未選 06 主題」時，讓 PRETONE 介入 */
    body[data-precolor][data-theme=""],
    body[data-precolor][data-theme="mono_base"]{
      --sanctuary-1:#000000;
      --sanctuary-2:#070707;
      --sanctuary-3:#0d0d0d;
      --sanctuary-4:#121212;
      --sanctuary-5:#171717;
    }

    /* =========================
       PRETONE：未選 06 主題前，直接改整體背景階（sanctuary-1~5）
       （只在 data-theme="" / mono_base 生效）
    ========================== */

    body[data-precolor="red"][data-theme=""],
    body[data-precolor="red"][data-theme="mono_base"]{
      --accent:#B91C1C;
      --sanctuary-1:#0b0506;
      --sanctuary-2:#140708;
      --sanctuary-3:#1e0a0b;
      --sanctuary-4:#2a0f10;
      --sanctuary-5:#3b1416;
      --breath-a: rgba(185,28,28,.20);
      --breath-b: rgba(255,255,255,.06);
    }

    body[data-precolor="orange"][data-theme=""],
    body[data-precolor="orange"][data-theme="mono_base"]{
      --accent:#D9480F;
      --sanctuary-1:#0b0604;
      --sanctuary-2:#140a06;
      --sanctuary-3:#1e0d07;
      --sanctuary-4:#2a1209;
      --sanctuary-5:#3b1a0d;
      --breath-a: rgba(217,72,15,.20);
      --breath-b: rgba(255,255,255,.06);
    }

    body[data-precolor="yellow"][data-theme=""],
    body[data-precolor="yellow"][data-theme="mono_base"]{
      --accent:#C8A100;
      --sanctuary-1:#080703;
      --sanctuary-2:#111005;
      --sanctuary-3:#1a1707;
      --sanctuary-4:#241f0a;
      --sanctuary-5:#332c0f;
      --breath-a: rgba(200,161,0,.18);
      --breath-b: rgba(255,255,255,.06);
    }

    body[data-precolor="green"][data-theme=""],
    body[data-precolor="green"][data-theme="mono_base"]{
      --accent:#1F7A5A;
      --sanctuary-1:#050a08;
      --sanctuary-2:#08110d;
      --sanctuary-3:#0a1913;
      --sanctuary-4:#0e231b;
      --sanctuary-5:#143226;
      --breath-a: rgba(31,122,90,.20);
      --breath-b: rgba(255,255,255,.06);
    }

    body[data-precolor="blue"][data-theme=""],
    body[data-precolor="blue"][data-theme="mono_base"]{
      --accent:#2B4C7E;
      --sanctuary-1:#05070b;
      --sanctuary-2:#070c14;
      --sanctuary-3:#0a101e;
      --sanctuary-4:#0e162a;
      --sanctuary-5:#13203b;
      --breath-a: rgba(43,76,126,.20);
      --breath-b: rgba(255,255,255,.06);
    }

    body[data-precolor="purple"][data-theme=""],
    body[data-precolor="purple"][data-theme="mono_base"]{
      --accent:#5B2C83;
      --sanctuary-1:#07050b;
      --sanctuary-2:#0d0814;
      --sanctuary-3:#140a1e;
      --sanctuary-4:#1c0e2a;
      --sanctuary-5:#29133b;
      --breath-a: rgba(91,44,131,.20);
      --breath-b: rgba(255,255,255,.06);
    }

    body[data-precolor="khaki"][data-theme=""],
    body[data-precolor="khaki"][data-theme="mono_base"]{
      --accent:#A8925A;
      --sanctuary-1:#070604;
      --sanctuary-2:#0f0d09;
      --sanctuary-3:#16130e;
      --sanctuary-4:#1f1a14;
      --sanctuary-5:#2d251d;
      --breath-a: rgba(168,146,90,.18);
      --breath-b: rgba(255,255,255,.06);
    }

    body[data-precolor="black"][data-theme=""],
    body[data-precolor="black"][data-theme="mono_base"]{
      --accent:#ffffff;
      --sanctuary-1:#000000;
      --sanctuary-2:#050505;
      --sanctuary-3:#0a0a0a;
      --sanctuary-4:#0f0f0f;
      --sanctuary-5:#151515;
      --breath-a: rgba(255,255,255,.08);
      --breath-b: rgba(255,255,255,.04);
    }

    body[data-precolor="gray"][data-theme=""],
    body[data-precolor="gray"][data-theme="mono_base"]{
      --accent:#d6d6d6;
      --sanctuary-1:#030303;
      --sanctuary-2:#0a0a0a;
      --sanctuary-3:#111111;
      --sanctuary-4:#171717;
      --sanctuary-5:#1f1f1f;
      --breath-a: rgba(255,255,255,.10);
      --breath-b: rgba(255,255,255,.05);
    }

    body[data-precolor="white"][data-theme=""],
    body[data-precolor="white"][data-theme="mono_base"]{
      --accent:#f5f5f5;
      --sanctuary-1:#0a0a0a;
      --sanctuary-2:#101010;
      --sanctuary-3:#171717;
      --sanctuary-4:#1f1f1f;
      --sanctuary-5:#292929;
      --breath-a: rgba(255,255,255,.14);
      --breath-b: rgba(255,255,255,.07);
    }

    /* =========================
       06 四種色調
    ========================== */
    body[data-theme="rose_ember"]{
      --sanctuary-1:#120a07;
      --sanctuary-2:#1e0e09;
      --sanctuary-3:#2a120b;
      --sanctuary-4:#3a160c;
      --sanctuary-5:#5a2410;

      --breath-a: rgba(255,120,55,.24);
      --breath-b: rgba(255,175,90,.14);

      --accent:#ff6a2a;
    }

    body[data-theme="midnight_tracker"]{
      --sanctuary-1:#06070b;
      --sanctuary-2:#0b0c10;
      --sanctuary-3:#10142a;
      --sanctuary-4:#161b3a;
      --sanctuary-5:#1c2348;
      --breath-a: rgba(59,108,255,.18);
      --breath-b: rgba(154,166,214,.12);
      --accent:#3b6cff;
    }

    body[data-theme="veil_warden"]{
      --sanctuary-1:#0e0b09;
      --sanctuary-2:#1a1410;
      --sanctuary-3:#221a15;
      --sanctuary-4:#2a211b;
      --sanctuary-5:#3a2f27;
      --breath-a: rgba(208,194,182,.18);
      --breath-b: rgba(184,168,154,.12);
      --accent:#d0c2b6;
    }

    body[data-theme="low_tide_keeper"]{
      --sanctuary-1:#071010;
      --sanctuary-2:#0b1514;
      --sanctuary-3:#0f1c1a;
      --sanctuary-4:#142423;
      --sanctuary-5:#1b3331;
      --breath-a: rgba(143,191,175,.20);
      --breath-b: rgba(184,199,192,.12);
      --accent:#8fbfaf;
    }

    section{
      min-height:100vh;
      display:flex;flex-direction:column;justify-content:center;align-items:center;
      padding:60px 20px;
      text-align:center;
      position:relative;
      z-index:1;
      scroll-margin-top: 8px;
      width:100%;
    }

    h1,h2{margin:0 0 18px;color:#fff;}
    h1{font-size:clamp(32px,5vw,52px);}
    h2{font-size:clamp(24px,4vw,40px);}

    p{
      max-width:var(--wrap);
      font-size:clamp(16px,2vw,20px);
      line-height:1.72;
      margin:0 auto;
      color:var(--text);
      overflow-wrap:anywhere;
      word-break:break-word;
    }

    .we-accent{color:var(--accent);text-shadow:0 0 22px rgba(255,106,42,.16);}
    .i-accent{color:var(--accent);text-shadow:0 0 22px rgba(255,106,42,.16);}

    .s1{background:linear-gradient(180deg,#000,#000);}
    .s2{background:linear-gradient(180deg,#000,var(--sanctuary-1));}
    .s3{background:linear-gradient(180deg,var(--sanctuary-1),var(--sanctuary-2));}
    .s4b{background:linear-gradient(180deg,var(--sanctuary-2),var(--sanctuary-3));}
    .s4{background:linear-gradient(180deg,var(--sanctuary-3),var(--sanctuary-4));}
    #s4a{background: linear-gradient(180deg, var(--sanctuary-4), var(--sanctuary-4)) !important;}
    .s5{ background: linear-gradient(180deg, var(--sanctuary-4), var(--sanctuary-5)); }
    .s6{ background: linear-gradient(180deg, var(--sanctuary-5), var(--sanctuary-5)); }
    .s7{ background: linear-gradient(180deg, var(--sanctuary-5), var(--sanctuary-5)); }
    .s8{ background: linear-gradient(180deg, var(--sanctuary-5), #000 72%, #000); }

    .breath{
      position:fixed;inset:0;pointer-events:none;z-index:0;mix-blend-mode:screen;opacity:.11;
      background:
        radial-gradient(120% 120% at 50% 115%, var(--breath-a) 0%, rgba(230,118,144,0) 70%),
        radial-gradient(140% 100% at 50% -10%, var(--breath-b) 0%, rgba(120,80,120,0) 72%);
      animation:breathPulse 9s ease-in-out infinite alternate,breathDrift 28s ease-in-out infinite alternate;
      transform-origin: 50% 60%;
      will-change: transform, opacity, background-position;
      transition: opacity .8s ease;
    }
    @keyframes breathPulse{
      0%{opacity:.09;transform:scale(1);}
      50%{opacity:.14;transform:scale(1.02);}
      100%{opacity:.09;transform:scale(1);}
    }
    @keyframes breathDrift{
      0%{background-position:50% 115%,50% -10%;}
      100%{background-position:48% 105%,52% 0%;}
    }
    .breath.transition{
      animation:none;
      opacity:.12;
      transform:scale(.985);
      filter:saturate(1.02);
      transition:transform .58s cubic-bezier(.22,.61,.36,1), opacity .58s cubic-bezier(.22,.61,.36,1);
    }
    .breath.transition.release{ opacity:.11; transform:scale(1); }

    .breath.pretone-kick{
      animation:none;
      opacity:.16;
      filter:saturate(1.18) contrast(1.04);
      transform:scale(1.01);
      transition: transform .62s cubic-bezier(.22,.61,.36,1), opacity .62s cubic-bezier(.22,.61,.36,1), filter .62s cubic-bezier(.22,.61,.36,1);
    }

    .grain{
      position:fixed;inset:0;pointer-events:none;z-index:1;
      opacity:.055;mix-blend-mode:overlay;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
      background-size:240px 240px;
      transform:translateZ(0);
    }

    .reveal{
      opacity:0;
      transform:translateY(60px);
      transition:opacity .9s cubic-bezier(.22,.61,.36,1),transform .9s cubic-bezier(.22,.61,.36,1);
      will-change: opacity, transform;
      transition-delay: var(--d, 0ms);
    }
    .reveal.in{opacity:1;transform:none;}

    .late{
      opacity:0;
      transform:translateY(8px);
      transition:opacity .9s cubic-bezier(.22,.61,.36,1),transform .9s cubic-bezier(.22,.61,.36,1);
      will-change: opacity, transform;
      transition-delay: var(--d, 0ms);
    }
    .late.in{opacity:1;transform:none;}

    .kicker{
      display:inline-flex;
      align-items:center;justify-content:center;
      padding:8px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.04);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
      font-size:11px;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:rgba(255,255,255,.68);
    }

    .secno{
      font-size:11px;
      letter-spacing:.42em;
      text-transform:uppercase;
      color:rgba(255,255,255,.48);
      margin-bottom:10px;
      display:inline-flex;
      align-items:center;
      gap:10px;
      user-select:none;
    }
    .secno::before,.secno::after{
      content:"";
      width:34px;height:1px;
      background:rgba(255,255,255,.10);
    }

    .hair-underline{
      display:inline-block;
      padding-bottom:2px;
      background-image: linear-gradient(transparent calc(100% - 1px), rgba(255,255,255,.22) 1px);
      background-repeat:no-repeat;
      background-size:100% 100%;
    }

    /* Hero */
    .brand{
      display:flex;flex-direction:column;align-items:center;gap:8px;
      margin-bottom:10px;position:relative;z-index:2;width:100%;
    }
    .wordmark{
      display:block;margin:0 auto;width:clamp(260px,60vw,560px);
      filter:drop-shadow(0 10px 28px rgba(0,0,0,.52));
      max-width:92vw;
    }
    .submark{
      margin-top:-5px;
      letter-spacing:.36em;
      font-size:clamp(16px,2.2vw,30px);
      font-weight:450;
      opacity:.9;
      color:rgba(255,255,255,.86);
    }
    .tagline{
      margin-top:10px;
      font-weight:300;
      letter-spacing:.14em;
      font-size:clamp(14px,1.8vw,18px);
      color:rgba(255,255,255,.75);
      text-shadow:0 0 10px rgba(255,106,42,.16);
      animation:breatheText 7s ease-in-out infinite;
      position:relative;z-index:2;
      padding:0 10px;
      max-width:92vw;
      overflow-wrap:anywhere;
    }
    @keyframes breatheText{ 0%,100%{opacity:.55;} 50%{opacity:.95;} }

    .arrow{
      font-size:22px;margin-top:14px;opacity:.72;
      animation:floatY 3.6s ease-in-out infinite;
      position:relative;z-index:2;
      color:rgba(255,255,255,.75);
      display:block;
      width:100%;
      text-align:center;
    }
    @keyframes floatY{ 0%,100%{transform:translateY(0);} 50%{transform:translateY(8px);} }

    @media (max-width: 640px){
      .s1{ padding: 0 20px; }
      .s1 .brand{
        position:absolute;top:50%;left:50%;
        transform:translate(-50%,-58%);
        margin:0;width:100%;
      }
      .s1 .tagline,
      .s1 .arrow{
        position:absolute;
        left:50%;
        transform:translateX(-50%);
        margin:0;
        width:max-content;
        max-width:92vw;
        text-align:center;
      }
      .s1 .tagline{ bottom: calc(28vh - 10px); }
      .s1 .arrow{ bottom: calc(28vh - 33px - 10px); }
      .s1 .arrow{ animation: breatheText 7s ease-in-out infinite, floatYKeepCenter 3.6s ease-in-out infinite; }
      @keyframes floatYKeepCenter{
        0%,100%{ transform:translateX(-50%) translateY(0); }
        50%    { transform:translateX(-50%) translateY(8px); }
      }
    }

    .who-title{
      font-size:clamp(36px,7vw,64px);
      line-height:1.08;
      letter-spacing:.04em;
      font-weight:700;
      max-width:92vw;
      overflow-wrap:anywhere;
    }

    /* Dots */
    .dots{
      position:fixed;
      right:8px;
      top:50%;
      transform:translateY(-50%);
      display:flex;
      flex-direction:column;
      gap:12px;
      z-index:40;
      pointer-events:auto;
    }
    .dot{
      width:5px;height:5px;border-radius:50%;
      border:1px solid rgba(255,255,255,.62);
      background:transparent;
      padding:0;
      cursor:pointer;
      outline:none;
      appearance:none;
      -webkit-tap-highlight-color: transparent;
      transition: transform .18s ease, opacity .18s ease, background .18s ease, border-color .18s ease, box-shadow .18s ease;
      opacity:.60;
      position:relative;
    }
    .dot.active{
      opacity:1;
      background:#fff;
      border-color:#fff;
      box-shadow: 0 0 10px rgba(255,255,255,.55), 0 0 22px rgba(255,255,255,.28);
      animation: dotBreath 2.2s ease-in-out infinite;
    }
    @keyframes dotBreath{
      0%,100%{ box-shadow: 0 0 8px rgba(255,255,255,.38), 0 0 16px rgba(255,255,255,.18); transform: scale(1); }
      50%{     box-shadow: 0 0 12px rgba(255,255,255,.62), 0 0 26px rgba(255,255,255,.26); transform: scale(1.08); }
    }
    .dot:active{ transform: scale(1.15); }
    .dot::after{
      content: attr(data-label);
      position:absolute;
      right: 14px;
      top:50%;
      transform: translateY(-50%);
      padding:6px 8px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.55);
      box-shadow: 0 12px 40px rgba(0,0,0,.45);
      color: rgba(255,255,255,.84);
      font-size:11px;
      letter-spacing:.12em;
      white-space:nowrap;
      opacity:0;
      pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
      transform-origin: 100% 50%;
    }
    .dot:hover::after,
    .dot:focus-visible::after,
    .dot.showtip::after{
      opacity:1;
      transform: translateY(-50%) translateX(-2px);
    }
    .dots.hint .dot{
      box-shadow: 0 0 0 rgba(255,255,255,0);
      animation: hintPulse 1.2s ease-in-out 1;
    }
    @keyframes hintPulse{
      0%{ opacity:.55; }
      40%{ opacity:1; box-shadow: 0 0 10px rgba(255,255,255,.22); }
      100%{opacity:.60; box-shadow: 0 0 0 rgba(255,255,255,0); }
    }
    @media (max-width: 640px){
      .dot{ width:6px;height:6px; }
      .dot::after{ font-size:10px; padding:6px 8px; right:16px; }
    }

    /* WHO card */
    .info-card{
      width:min(var(--wrap), 92vw);
      margin-top:18px;
      padding:18px 16px;
      border-radius:18px;
      background: linear-gradient(180deg, rgba(255,255,255,.045), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.10);
      box-shadow: 0 18px 60px rgba(0,0,0,.45);
      backdrop-filter: blur(6px);
      position:relative;
      z-index:2;
    }
    .info-card .mini{ margin-bottom:10px; display:flex; justify-content:center; }

    .frame-size{
      width:min(220px, 72vw);
      aspect-ratio: 1 / 1;
    }

    /* Primary Mark */
    .s3{ padding-top:70px; padding-bottom:70px; }
    .s3 .stack{
      width:min(var(--wrap), 92vw);
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:16px;
      text-align:center;
      position:relative;
      z-index:2;
    }

    .logo-frame{
      border-radius:18px;
      border:1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(140% 120% at 50% 0%, rgba(255,255,255,.055), rgba(255,255,255,.015) 62%),
        linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
      box-shadow: 0 22px 72px rgba(0,0,0,.46);
      backdrop-filter: blur(7px);
      display:grid;
      place-items:center;
      overflow:hidden;
      position:relative;
      clip-path: circle(0% at 50% 50%);
      transition: clip-path 2.35s cubic-bezier(.22,.61,.36,1),
                  transform .35s ease,
                  box-shadow .45s ease,
                  border-color .45s ease,
                  background .55s ease;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      transform: translateY(0) scale(1);
    }
    .logo-frame.in{ clip-path: circle(120% at 50% 50%); }
    .logo-frame::before{
      content:"";
      position:absolute;
      inset:-40%;
      background: linear-gradient(90deg, rgba(255,255,255,0) 35%, rgba(255,255,255,.07) 50%, rgba(255,255,255,0) 65%);
      transform: translateX(-35%) rotate(12deg);
      opacity:0;
      pointer-events:none;
    }
    .logo-frame.sheen::before{ opacity:1; animation: sheenSweep 2.8s cubic-bezier(.22,.61,.36,1) 1 both; }
    @keyframes sheenSweep{ 0%{ transform: translateX(-35%) rotate(12deg);} 100%{ transform: translateX(35%) rotate(12deg);} }

    .logo-frame:hover{
      border-color: rgba(255,255,255,.16);
      box-shadow:
        0 24px 82px rgba(0,0,0,.55),
        0 0 26px rgba(255,106,42,.10),
        inset 0 1px 0 rgba(255,255,255,.06);
      transform: translateY(-1px) scale(1.01);
    }
    .logo-frame:active{ transform: translateY(0) scale(.985); }

    .logo-frame[data-mode="fabric"]{
      background:
        radial-gradient(140% 120% at 50% 0%, rgba(255,255,255,.055), rgba(255,255,255,.015) 62%),
        linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02)),
        repeating-linear-gradient(135deg, rgba(255,255,255,.02) 0 2px, rgba(0,0,0,0) 2px 6px);
    }
    .logo-frame[data-mode="mono"]{
      background:
        radial-gradient(140% 120% at 50% 0%, rgba(255,255,255,.05), rgba(255,255,255,0) 62%),
        linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
    }

    .corner-hint{
      position:absolute; inset:10px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.06);
      pointer-events:none;
      opacity:0;
      transition: opacity .55s ease;
      z-index:1;
    }
    .corner-hint::before,
    .corner-hint::after{
      content:"";
      position:absolute;
      width:10px;height:10px;
      border:1px solid rgba(255,255,255,.18);
      opacity:.35;
      border-right:none;border-bottom:none;
      border-radius:2px;
    }
    .corner-hint::before{ left:10px; top:10px; }
    .corner-hint::after{ right:10px; bottom:10px; transform: rotate(180deg); }
    .logo-frame.in .corner-hint{ opacity:.9; }
    .logo-frame.hint .corner-hint{ animation: hintGlow 1.35s ease-in-out 1; }
    @keyframes hintGlow{ 0%{opacity:.25;} 45%{opacity:1;} 100%{opacity:.9;} }

    .logo-mark{
      width: clamp(120px, 26vw, 210px);
      opacity:0;
      transform: translateY(10px) scale(.94);
      transition: opacity 1.9s ease, transform 2.2s ease, filter 2.4s ease;
      transition-delay: .42s;
      filter: drop-shadow(0 14px 30px rgba(0,0,0,.62));
      will-change: opacity, transform, filter;
      position:relative;
      z-index:2;
      max-width:100%;
    }
    .logo-mark.in{ opacity:1; transform: translateY(0) scale(1); }
    .logo-frame[data-mode="mono"] .logo-mark{
      filter: grayscale(1) contrast(1.1) brightness(1.05) drop-shadow(0 14px 30px rgba(0,0,0,.62));
    }

    .logo-frame.pulse{ animation: stagePulse .62s cubic-bezier(.22,.61,.36,1) both; }
    @keyframes stagePulse{
      0%{ transform: translateY(0) scale(1); }
      35%{ transform: translateY(-1px) scale(1.02); }
      100%{ transform: translateY(0) scale(1); }
    }
    .logo-mark.pop{ animation: markPop .62s cubic-bezier(.22,.61,.36,1) both; }
    @keyframes markPop{
      0%{ filter: drop-shadow(0 14px 30px rgba(0,0,0,.62)); transform: translateY(0) scale(1); }
      40%{ filter: drop-shadow(0 0 18px rgba(255,106,42,.18)); transform: translateY(-1px) scale(1.03); }
      100%{ filter: drop-shadow(0 14px 30px rgba(0,0,0,.62)); transform: translateY(0) scale(1); }
    }

    .s3 .label{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      font-size:12px;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:rgba(255,255,255,.62);
      margin-top:2px;
    }

    .s3 .bullets{
      width:min(var(--wrap), 92vw);
      margin-top:2px;
      display:grid;
      gap:10px;
      text-align:left;
    }
    .s3 .bullet{
      position:relative;
      padding-left:14px;
      color:rgba(255,255,255,.84);
      line-height:1.7;
      font-size:clamp(15px, 2.4vw, 18px);
      overflow-wrap:anywhere;
    }
    .s3 .bullet::before{
      content:"";
      position:absolute;left:0;top:.72em;
      width:6px;height:6px;border-radius:50%;
      background:rgba(255,255,255,.80);
      box-shadow:0 0 0 3px rgba(255,255,255,.10);
    }
    .s3 .sig{
      width:min(var(--wrap), 92vw);
      margin-top:10px;
      padding-top:14px;
      border-top:1px solid rgba(255,255,255,.10);
      color:rgba(255,255,255,.66);
      font-size:13px;
      letter-spacing:.10em;
      text-align:left;
      overflow-wrap:anywhere;
    }

    /* Sanctuary wrap */
    .sanctuary-wrap{
      position:relative;
      width:min(var(--wrap), 92vw);
      padding:22px 18px 18px;
      border-radius:22px;
      border:1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(140% 120% at 50% 0%, rgba(255,255,255,.055), rgba(255,255,255,.015) 60%),
        linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
      box-shadow: 0 22px 72px rgba(0,0,0,.46);
      backdrop-filter: blur(7px);
      overflow:hidden;
      z-index:2;
      margin:0 auto;
    }
    .sanctuary-wrap::before{
      content:"";
      position:absolute;inset:0;
      background:
        radial-gradient(18px 18px at 16% 22%, rgba(255,255,255,.06), rgba(255,255,255,0) 70%),
        radial-gradient(22px 22px at 82% 68%, rgba(255,255,255,.05), rgba(255,255,255,0) 72%),
        linear-gradient(90deg, rgba(255,255,255,.06), rgba(255,255,255,0) 28%, rgba(255,255,255,0) 72%, rgba(255,255,255,.05));
      opacity:.55;
      pointer-events:none;
    }
    .sanctuary-wrap::after{
      content:"";
      position:absolute;inset:14px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.06);
      pointer-events:none;
      opacity:.85;
    }
    .sanctuary-kicker{ display:flex; justify-content:center; margin-bottom:10px; position:relative; z-index:2; }

    /* 05 全屏沉靜（保留全屏容器） */
    #s4{ padding:0; }
    #s4 .sanctuary-wrap{
      width:100%;
      height:100vh;
      height:100svh;
      max-width:none;
      border-radius:0;
      border:none;
      box-shadow:none;
      background: transparent;
      backdrop-filter:none;
      padding:0 20px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
    }
    #s4 .sanctuary-wrap::before,
    #s4 .sanctuary-wrap::after{ display:none; }

    /* =========================
       05 Cinema（舊版容器保留給 overlay 用）
    ========================== */
    .cinema{
      width:min(var(--wrap), 92vw);
      position:relative;
      height: 220px;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      z-index:2;
    }
    .cinema-step{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      opacity:0;
      transform:none;
      transition: opacity 1.25s cubic-bezier(.22,.61,.36,1);
      will-change: opacity;
    }
    .cinema-step.show{ opacity:1; }
    .cinema-step.hide{ opacity:0; }

    /* FLAME MARK (page) */
    .flame-stage{
      position:relative;
      width:min(var(--wrap), 92vw);
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:14px;
      z-index:2;
    }
    .flame-frame{
      border-radius:18px;
      background:
        radial-gradient(120% 120% at 50% 30%, rgba(255,255,255,.06), rgba(255,255,255,0) 60%),
        linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.10);
      box-shadow:
        0 16px 54px rgba(0,0,0,.55),
        inset 0 1px 0 rgba(255,255,255,.06);
      backdrop-filter: blur(6px);
      overflow:hidden;
      position:relative;
      display:grid;
      place-items:center;
      clip-path: circle(0% at 50% 48%);
      transition: clip-path 2.1s cubic-bezier(.22,.61,.36,1);
      will-change: clip-path;
      width:min(220px, 72vw);
      aspect-ratio:1/1;
    }
    .flame-frame.in{ clip-path: circle(120% at 50% 48%); }
    .flame-frame .corner-hint{ opacity:0; }
    .flame-frame.in .corner-hint{ opacity:.9; }
    .flame-img{
      width: clamp(120px, 26vw, 210px);
      margin:0;
      opacity:0;
      transform: translateY(10px) scale(.94);
      transition: opacity 1.9s ease, transform 2.2s ease, filter 2.4s ease;
      filter: drop-shadow(0 14px 28px rgba(0,0,0,.66));
      will-change: opacity, transform, filter;
      position:relative;
      z-index:2;
      max-width:100%;
    }
    .flame-img.in{
      opacity:1;
      transform: translateY(0) scale(1);
      animation: flameBreath 8.8s ease-in-out infinite alternate;
    }
    @keyframes flameBreath{
      0%{ filter: drop-shadow(0 0 14px rgba(255,106,42,.14)); }
      100%{ filter: drop-shadow(0 0 26px rgba(255,106,42,.22)); }
    }
    .manifest{
      width:min(var(--wrap), 92vw);
      margin-top:0;
      padding:18px 16px;
      border-radius:18px;
      background: radial-gradient(120% 120% at 50% 0%, rgba(255,255,255,.05), rgba(255,255,255,.015) 60%),
                  linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.10);
      box-shadow: 0 18px 62px rgba(0,0,0,.46);
      backdrop-filter: blur(6px);
      position:relative;
      z-index:2;
      text-align:left;
      overflow-wrap:anywhere;
    }
    .manifest.center{ text-align:center; }

    .sanctuary-sub{ max-width:100%; line-height:1.62; margin:14px auto 0; position:relative; z-index:2; }
    .sanctuary-sub p{ font-size:clamp(15px,3.8vw,18px); color:rgba(255,255,255,.82); max-width:100%; }

    .align-grid{ width:100%; display:grid; grid-template-columns:1fr; gap:12px; margin-top:16px; position:relative; z-index:2; text-align:left; }
    .mood{
      width:100%;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      box-shadow: 0 18px 60px rgba(0,0,0,.40);
      overflow:hidden;
      text-align:left;
      position:relative;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      transition: transform .25s ease, border-color .25s ease, box-shadow .25s ease, opacity .25s ease;
      padding:14px 14px 12px;
      max-width:100%;
    }
    .mood:active{ transform: scale(.99); }
    .mood.dim{ opacity:.42; }
    .mood.active{
      border-color: rgba(255,255,255,.18);
      box-shadow: 0 18px 80px rgba(0,0,0,.55), 0 0 28px rgba(255,106,42,.10);
      transform: translateY(-1px);
    }
    .mood .row{ display:flex; align-items:flex-start; justify-content:space-between; gap:10px; flex-wrap:wrap; }
    .mood .title{ font-size:14px; letter-spacing:.20em; text-transform:uppercase; color:rgba(255,255,255,.72); margin:0 0 6px; }
    .mood .desc{ margin:0; color:rgba(255,255,255,.82); font-size:clamp(15px, 3.8vw, 17px); line-height:1.55; max-width:100%; overflow-wrap:anywhere; }
    .mood .sw{ display:flex; gap:8px; align-items:center; justify-content:flex-end; margin-left:auto; padding-top:4px; }
    .dot-swatch{ width:10px;height:10px;border-radius:50%; border:1px solid rgba(255,255,255,.18); box-shadow: 0 0 0 3px rgba(255,255,255,.04); flex:0 0 auto; }

    .quiz{ width:100%; margin-top:14px; display:grid; gap:14px; position:relative; z-index:2; text-align:left; }
    .q{
      width:100%;
      padding:16px 14px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.045), rgba(255,255,255,.02));
      box-shadow: 0 18px 60px rgba(0,0,0,.40);
      backdrop-filter: blur(6px);
      max-width:100%;
    }
    .q h3{ margin:0 0 12px; font-size:14px; letter-spacing:.12em; color:rgba(255,255,255,.80); font-weight:650; overflow-wrap:anywhere; }
    .opts{ display:grid; gap:10px; }
    .opt{
      width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.20);
      color: rgba(255,255,255,.86);
      font-size:clamp(15px, 3.8vw, 17px);
      line-height:1.45;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      transition: transform .22s ease, opacity .22s ease, border-color .22s ease, box-shadow .22s ease, background .22s ease;
      position:relative;
      overflow-wrap:anywhere;
      word-break:break-word;
      max-width:100%;
    }
    .opt:active{ transform: scale(.99); }
    .opt.dim{ opacity:.42; }
    .opt.active{
      opacity:1;
      border-color: rgba(255,255,255,.20);
      background: rgba(255,255,255,.06);
      box-shadow: 0 0 18px rgba(255,106,42,.12);
    }

    .quiz-actions{ display:flex; justify-content:center; margin-top:6px; gap:10px; flex-direction:column; align-items:center; }
    .unlock-hint{
      font-size:12px;
      letter-spacing:.10em;
      color:rgba(255,255,255,.62);
      text-align:center;
      padding:0 6px;
    }

    .ghost-btn{
      padding:12px 18px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.04);
      color: rgba(255,255,255,.88);
      font-weight:800;
      letter-spacing:.10em;
      cursor:pointer;
      transition: transform .22s ease, border-color .22s ease, background .22s ease, opacity .22s ease, box-shadow .22s ease;
      max-width:92vw;
    }
    .ghost-btn:active{ transform: scale(.99); }
    .ghost-btn[disabled]{ opacity:.45; cursor:not-allowed; }

    .ghost-btn.ready{
      border-color: rgba(255,255,255,.26);
      background: rgba(255,255,255,.06);
      box-shadow: 0 0 18px rgba(255,106,42,.14);
      animation: unlockPulse 1.2s ease-in-out infinite;
    }
    @keyframes unlockPulse{
      0%,100%{ transform: translateY(0); }
      50%{ transform: translateY(-1px); }
    }

    .result-page{
      width:min(var(--wrap), 92vw);
      margin:0 auto;
      padding:22px 18px 18px;
      border-radius:22px;
      border:1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(140% 120% at 50% 0%, rgba(255,255,255,.055), rgba(255,255,255,.015) 60%),
        linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
      box-shadow: 0 22px 72px rgba(0,0,0,.46);
      backdrop-filter: blur(7px);
      overflow:hidden;
      z-index:2;
      text-align:left;
      position:relative;
    }
    .result-page::after{
      content:"";
      position:absolute;inset:14px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.06);
      pointer-events:none;
      opacity:.85;
    }
    .rp-kicker{ display:flex; justify-content:center; margin-bottom:10px; position:relative; z-index:2; }
    .arch-title{ margin:6px 0 4px; font-size:clamp(22px, 5vw, 32px); font-weight:850; letter-spacing:.06em; color:#fff; position:relative; z-index:2; overflow-wrap:anywhere; }
    .arch-sub{ margin:0 0 12px; font-size:13px; letter-spacing:.20em; text-transform:uppercase; color:rgba(255,255,255,.66); position:relative; z-index:2; overflow-wrap:anywhere; }

    .result-shell{ position:relative; z-index:2; display:grid; gap:12px; }
    .arch-grid{ display:grid; gap:10px; position:relative; z-index:2; }
    .arch-card{
      border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      padding:14px 14px;
      box-shadow: 0 18px 60px rgba(0,0,0,.30);
      overflow-wrap:anywhere;
    }
    .arch-card .t{ margin:0 0 6px; font-size:12px; letter-spacing:.22em; text-transform:uppercase; color:rgba(255,255,255,.62); }
    .arch-card .v{ margin:0; font-size:15px; line-height:1.7; color:rgba(255,255,255,.84); }

    .arch-actions{ margin-top:10px; display:flex; justify-content:center; position:relative; z-index:2; }

    .arch-emblem{
      width:100%;
      display:flex;
      justify-content:center;
      margin:0;
      position:relative;
      z-index:2;
    }
    .emblem-slot{
      width:min(260px, 78vw);
      aspect-ratio: 1 / 1;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      box-shadow: 0 18px 60px rgba(0,0,0,.30);
      display:grid;
      place-items:center;
      color: rgba(255,255,255,.62);
      font-size:12px;
      letter-spacing:.22em;
      text-transform:uppercase;
      user-select:none;
    }

    .result-watermark{
      margin-top:12px;
      padding-top:12px;
      border-top:1px solid rgba(255,255,255,.10);
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      position:relative;
      z-index:2;
      opacity:.48;
      user-select:none;
    }
    .result-watermark img{
      width:16px;
      height:16px;
      object-fit:contain;
      filter: drop-shadow(0 8px 20px rgba(0,0,0,.35));
    }
    .result-watermark span{
      font-size:11px;
      letter-spacing:.18em;
      color:rgba(255,255,255,.70);
      text-transform:uppercase;
    }

    @media (min-width: 980px){
      .result-page{
        width:min(1120px, 92vw);
        aspect-ratio: 16 / 9;
        padding:18px 18px 16px;
        display:flex;
        flex-direction:column;
        justify-content:space-between;
      }
      .result-shell{
        grid-template-columns: 320px 1fr;
        align-items:stretch;
        gap:14px;
      }
      .arch-emblem{
        justify-content:flex-start;
      }
      .emblem-slot{
        width: 300px;
        aspect-ratio: 1 / 1;
      }
      .arch-grid{
        grid-template-columns: 1fr 1fr;
        gap:10px;
      }
      .arch-card{
        padding:12px 12px;
      }
      .arch-card:nth-child(1){ grid-column: 1 / 3; }
      .arch-title{ margin-top:0; }
      .arch-sub{ margin-bottom:8px; }
      .arch-actions{ margin-top:8px; }
      .result-watermark{ margin-top:10px; padding-top:10px; }
    }

    .hearth-wrap{
      width:min(var(--wrap), 92vw);
      margin:0 auto;
      padding:22px 18px 18px;
      border-radius:22px;
      border:1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(140% 120% at 50% 0%, rgba(255,255,255,.055), rgba(255,255,255,.015) 60%),
        linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
      box-shadow: 0 22px 72px rgba(0,0,0,.46);
      backdrop-filter: blur(7px);
      overflow:hidden;
      z-index:2;
      position:relative;
      text-align:center;
    }
    .hearth-wrap::after{
      content:"";
      position:absolute;inset:14px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.06);
      pointer-events:none;
      opacity:.85;
    }
    .hearth-top{ position:relative; z-index:2; display:flex; flex-direction:column; align-items:center; gap:10px; }
    .hearth-canvas{
      width:min(520px, 86vw);
      height:240px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      box-shadow: 0 18px 60px rgba(0,0,0,.35);
      overflow:hidden;
      display:block;
    }
    @media (max-width: 420px){
      .hearth-canvas{ height:220px; }
    }
    .hearth-level{ font-size:12px; letter-spacing:.22em; text-transform:uppercase; color:rgba(255,255,255,.66); margin-top:-2px; }
    .microcopy{ margin-top:10px; font-size:12px; letter-spacing:.10em; color:rgba(255,255,255,.62); position:relative; z-index:2; padding:0 6px; overflow-wrap:anywhere; }

    form{
      margin-top:18px;
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      justify-content:center;
      position:relative;
      z-index:2;
      width:100%;
    }
    input[type="email"]{
      padding:12px 20px;border-radius:12px;
      border:1px solid rgba(255,255,255,.16);
      min-width:min(320px, 82vw);
      font-size:16px;color:#222;background:#fff;outline:none;
      max-width:100%;
    }
    button{
      padding:12px 22px;border:none;border-radius:12px;
      font-weight:800;font-size:16px;color:#fff;background:var(--accent);
      cursor:pointer;transition:background .42s, transform .22s ease;
      letter-spacing:.08em;
      max-width:92vw;
    }
    button:hover{filter: brightness(.96);}
    button:active{ transform: scale(.99); }

    .links{
      display:flex;
      gap:18px;
      justify-content:center;
      margin-top:14px;
      position:relative;
      z-index:2;
      flex-wrap:wrap;
      padding:0 6px;
    }
    .links a{
      color:rgba(255,255,255,.86);
      text-decoration:none;
      border-bottom:1px solid rgba(255,255,255,.22);
      padding-bottom:2px;
      white-space:nowrap;
    }
    .footer-mark{
      margin-top:18px;
      font-size:11px;
      letter-spacing:.18em;
      color:rgba(255,255,255,.40);
      position:relative;
      z-index:2;
      user-select:none;
    }

    .toast{
      position:fixed;left:50%;bottom:28px;transform:translateX(-50%);
      background:rgba(0,0,0,.74);
      padding:12px 18px;border-radius:12px;
      font-size:14px;box-shadow:0 10px 40px rgba(0,0,0,.45);
      opacity:0;pointer-events:none;transition:opacity .28s ease;
      z-index:99;
      color:rgba(255,255,255,.88);
      max-width:92vw;
      text-align:center;
    }
    .toast.show{opacity:1;}

    @media (prefers-reduced-motion: reduce){
      .breath, .grain, .dot.active, .flame-img.in{ animation:none !important; }
      .reveal, .late, .logo-frame, .flame-frame, .mood, .opt{ transition:none !important; }
      .cinema-step{ transition:none !important; opacity:1 !important; transform:none !important; }
      .ghost-btn.ready{ animation:none !important; }
    }

    /* 你的 override CSS（保留原樣） */
    #s7{ padding: 42px 16px; }
    #s7 .result-page{ padding: 16px 14px 14px; border-radius: 20px; }
    #s7 .rp-kicker{ margin-bottom: 8px; }
    #s7 .emblem-slot{ width: min(210px, 70vw); aspect-ratio: 1 / 1; border-radius: 16px; font-size: 11px; letter-spacing: .18em; }
    #s7 .arch-title{ margin: 6px 0 2px; font-size: clamp(20px, 4.6vw, 30px); }
    #s7 .arch-sub{ margin: 0 0 10px; font-size: 12px; letter-spacing: .18em; }
    #s7 .arch-card{ padding: 12px 12px; border-radius: 14px; }
    #s7 .arch-card .t{ margin: 0 0 6px; font-size: 11px; letter-spacing: .18em; }
    #s7 .arch-card .v{ font-size: 14px; line-height: 1.55; }
    #s7 .microcopy{ margin-top: 10px; }
    #s7 .arch-actions{ margin-top: 10px; }
    #s7 .result-watermark{ margin-top: 10px; padding-top: 10px; }

    @media (min-width: 900px), (min-aspect-ratio: 16/9){
      #s7{ padding: 26px 18px; }
      #s7 .result-page{
        width: min(1080px, 92vw);
        max-height: calc(100vh - 56px);
        overflow: hidden;
        display: grid;
        grid-template-columns: 320px 1fr;
        grid-template-rows: auto auto 1fr auto auto;
        column-gap: 16px;
        align-items: start;
      }
      #s7 .rp-kicker{ grid-column: 1 / -1; }
      #s7 .arch-emblem{ grid-column: 1; grid-row: 2 / span 3; margin: 0; }
      #s7 .arch-title{ grid-column: 2; }
      #s7 .arch-sub{ grid-column: 2; }
      #s7 .arch-grid{ grid-column: 2; gap: 10px; }
      #s7 .microcopy{ grid-column: 1 / -1; }
      #s7 .arch-actions{ grid-column: 1 / -1; }
      #s7 .result-watermark{ grid-column: 1 / -1; }
    }

    :root{
      --card-bg: rgba(255,255,255,.035);
      --card-border: rgba(255,255,255,.10);
      --card-shadow: 0 14px 44px rgba(0,0,0,.34);
      --card-inset: inset 0 1px 0 rgba(255,255,255,.06);
    }

    .sanctuary-wrap,
    .info-card,
    .mood,
    .q,
    .result-page,
    .arch-card,
    .hearth-wrap{
      background: linear-gradient(180deg, var(--card-bg), rgba(255,255,255,.018));
      border-color: var(--card-border);
      box-shadow: var(--card-shadow), var(--card-inset);
    }

    #s7 .result-page,
    #s8 .hearth-wrap{
      box-shadow: 0 12px 40px rgba(0,0,0,.30), inset 0 1px 0 rgba(255,255,255,.06);
    }

    body:not([data-theme]),
    body[data-theme=""],
    body[data-theme="mono_base"]{
      --mono-glow-cool: rgba(190,210,255,.22);
      --mono-glow-warm: rgba(255,214,200,.16);
      --mono-glow-white: rgba(255,255,255,.22);
    }

    body:not([data-theme]) .we-accent,
    body[data-theme=""] .we-accent,
    body[data-theme="mono_base"] .we-accent,
    body:not([data-theme]) .i-accent,
    body[data-theme=""] .i-accent,
    body[data-theme="mono_base"] .i-accent{
      color: rgba(255,255,255,.96);
      text-shadow:
        0 0 18px var(--mono-glow-white),
        0 0 22px var(--mono-glow-cool),
        0 0 26px var(--mono-glow-warm);
    }

    #unlockBtn[disabled]{
      opacity:.62;
      background: rgba(255,255,255,.03);
      border-color: rgba(255,255,255,.12);
      box-shadow: none;
    }

    /* =========================
       08 截圖友善：底部資訊固定可見
       (override)
    ========================== */
    #s7 .microcopy,
    #s7 .arch-actions,
    #s7 .result-watermark{
      opacity: 1 !important;
      transform: none !important;
      transition: none !important;
    }

    #s7 .arch-title,
    #s7 .arch-sub{
      text-align: center;
      margin-left: auto;
      margin-right: auto;
    }
    #s7 .arch-sub{
      letter-spacing: .28em;
      opacity: .72;
    }

    #s7 .emblem-slot{
      display:flex;
      align-items:center;
      justify-content:center;
      background: transparent;
    }

    #s7 .emblem-img{
      width: 72%;
      max-width: 220px;
      height: auto;
      display:block;
      filter: saturate(1.05) contrast(1.05);
    }

    body[data-theme="rose_ember"] #archetypeEmblem{
      filter:
        drop-shadow(0 14px 38px rgba(122,43,18,.55))
        drop-shadow(0 0 18px rgba(255,210,184,.45))
        saturate(1.12);
    }
    body[data-theme="midnight_tracker"] #archetypeEmblem{
      filter:
        drop-shadow(0 14px 38px rgba(10,19,53,.60))
        drop-shadow(0 0 18px rgba(175,194,255,.45))
        saturate(1.08);
    }
    body[data-theme="veil_warden"] #archetypeEmblem{
      filter:
        drop-shadow(0 14px 34px rgba(74,58,48,.48))
        drop-shadow(0 0 16px rgba(242,230,214,.42))
        saturate(1.03);
    }
    body[data-theme="low_tide_keeper"] #archetypeEmblem{
      filter:
        drop-shadow(0 14px 36px rgba(11,36,32,.55))
        drop-shadow(0 0 18px rgba(191,230,218,.45))
        saturate(1.06);
    }

    /* =========================
       05 APPLE-LIKE OVERLAY
    ========================== */
    .cinema-overlay{
      position:fixed;
      inset:0;
      z-index:999;
      display:none;
      place-items:center;
      background: linear-gradient(180deg, rgba(0,0,0,.72), rgba(0,0,0,.78));
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      opacity:0;
      pointer-events:none;
      transition: opacity .42s cubic-bezier(.22,.61,.36,1);
    }

    .cinema-overlay.show{
      display:grid;
      opacity:1;
      pointer-events:auto;
    }

    .cinema-overlay-inner{
      width:min(980px, 92vw);
      height: min(560px, 78svh);
      height: min(560px, 78vh);
      border-radius:22px;
      border:1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.045), rgba(255,255,255,.02));
      box-shadow: 0 28px 110px rgba(0,0,0,.62);
      position:relative;
      overflow:hidden;
      display:grid;
      place-items:center;
      padding: 18px;
    }

    .cinema-overlay-cinema{
      width: min(760px, 92vw);
      height: 240px;
    }

    @media (max-width: 520px){
      .cinema-overlay-inner{
        height: min(520px, 82svh);
        padding: 16px 14px;
      }
      .cinema-overlay-cinema{
        height: 220px;
      }
    }

    .cinema-skip{
      position:absolute;
      right:14px;
      top:14px;
      border-radius:999px;
      padding:10px 14px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.22);
      color: rgba(255,255,255,.86);
      font-weight:800;
      letter-spacing:.10em;
      cursor:pointer;
      transition: transform .18s ease, background .18s ease, border-color .18s ease, opacity .18s ease;
    }
    .cinema-skip:active{ transform: scale(.98); }
    
    /* ✅ 05A 全屏沉靜引導頁（同 #s4 的全屏規格） */
#s4a{ padding:0; }
#s4a .guide-wrap{
  width:100%;
  height:100vh;
  height:100svh;
  max-width:none;
  border-radius:0;
  border:none;
  box-shadow:none;
  background: transparent;
  backdrop-filter:none;
  padding: 0 20px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
}

/* 引導文字舞台：維持全屏但文字區不要像 overlay 那樣有框 */
#s4a .guide-cinema{
  width: min(760px, 92vw);
  height: 220px;
}
/* ✅ GUIDE 文字：更大、更粗、更有存在感（不影響其他頁） */
#s4a .cinema-step p{
  margin:0;
  font-size: clamp(22px, 5.6vw, 34px);
  font-weight: 850;
  letter-spacing: .06em;
  line-height: 1.28;
  color: rgba(255,255,255,.92);
  text-shadow: 0 10px 36px rgba(0,0,0,.50);
}

/* ✅ GUIDE 文字淡入淡出節奏：更慢 */
#s4a .cinema-step{
  transition: opacity 1.85s cubic-bezier(.22,.61,.36,1);
}

/* SKIP 按鈕（沿用 ghost-btn，不需要 overlay 的 cinema-skip） */
#guideSkipBtn{
  min-width: 120px;
}

  </style>
</head>

<body data-theme="">
  <div class="breath" id="breath" aria-hidden="true"></div>
  <div class="grain" aria-hidden="true"></div>

  <nav class="dots" id="dotsNav" aria-label="Section navigation">
    <button class="dot" data-target="s1"  data-label="HERO" aria-label="Go to Hero"></button>
    <button class="dot" data-target="s1b" data-label="TONE" aria-label="Go to Tone"></button>
    <button class="dot" data-target="s2"  data-label="WHO WE ARE" aria-label="Go to Who We Are"></button>
    <button class="dot" data-target="s3"  data-label="BRAND MARK" aria-label="Go to Brand Mark"></button>
    <button class="dot" data-target="s4b" data-label="BRAND TAGLINE" aria-label="Go to Brand Tagline"></button>
    <button class="dot" data-target="s4"  data-label="SANCTUARY" aria-label="Go to Sanctuary"></button>
    <button class="dot" data-target="s5"  data-label="AESTHETIC" aria-label="Go to Aesthetic Alignment"></button>
    <button class="dot" data-target="s6"  data-label="REFLECTION" aria-label="Go to Introspective Reflection"></button>
    <button class="dot" data-target="s7"  data-label="ARCHETYPE" aria-label="Go to Archetype"></button>
    <button class="dot" data-target="s8"  data-label="HEARTH" aria-label="Go to Our Flame"></button>
  </nav>

  <!-- ① Hero -->
  <section class="s1" id="s1">
    <div class="brand">
      <img class="wordmark reveal in" src="wordmark.png" alt="HESTIA wordmark" />
      <div class="submark">TAIWAN</div>
    </div>

    <div class="tagline">即將到來，搶先進入 HEST<span class="i-accent">i</span>A 宇宙</div>
    <div class="arrow">↓</div>
  </section>

  <!-- PRETONE -->
  <section class="s1b" id="s1b">
    <div class="secno reveal" style="--d:120ms;">TONE</div>

    <div class="sanctuary-wrap" id="pretoneWrap">
      <div class="sanctuary-kicker">
        <span class="kicker reveal in">PRE-TONE</span>
      </div>

      <h2 class="reveal" style="--d:180ms;">先選一個你喜歡的色調吧？</h2>
      <p class="reveal" style="--d:220ms;">
        這會先替你的HESTiA宇宙體驗套上一層「氣質底色」。
      </p>

      <div class="pretone-grid reveal" style="--d:280ms;" id="pretoneGrid" aria-label="Pre-tone color palette">
        <button class="pretone" type="button" data-pre="red"    data-hex="#B91C1C"><span class="chip" style="background:#B91C1C"></span><span class="nm">燼紅｜EMBER RED</span></button>
        <button class="pretone" type="button" data-pre="orange" data-hex="#D9480F"><span class="chip" style="background:#D9480F"></span><span class="nm">熔橙｜MOLTEN ORANGE</span></button>
        <button class="pretone" type="button" data-pre="yellow" data-hex="#C8A100"><span class="chip" style="background:#C8A100"></span><span class="nm">鎏金｜AURIC GOLD</span></button>
        <button class="pretone" type="button" data-pre="green"  data-hex="#1F7A5A"><span class="chip" style="background:#1F7A5A"></span><span class="nm">苔息｜SAGE MOSS</span></button>
        <button class="pretone" type="button" data-pre="blue"   data-hex="#2B4C7E"><span class="chip" style="background:#2B4C7E"></span><span class="nm">深海｜DEEP NAVY</span></button>

        <button class="pretone" type="button" data-pre="purple" data-hex="#5B2C83"><span class="chip" style="background:#5B2C83"></span><span class="nm">暮紫｜VIOLET VEIL</span></button>
        <button class="pretone" type="button" data-pre="khaki"  data-hex="#A8925A"><span class="chip" style="background:#A8925A"></span><span class="nm">砂金｜SAND KHaki</span></button>
        <button class="pretone" type="button" data-pre="black"  data-hex="#0B0C10"><span class="chip" style="background:#0B0C10"></span><span class="nm">曜黑｜OBSIDIAN</span></button>
        <button class="pretone" type="button" data-pre="gray"   data-hex="#3A3A3A"><span class="chip" style="background:#3A3A3A"></span><span class="nm">霧灰｜ASH</span></button>
        <button class="pretone" type="button" data-pre="white"  data-hex="#F5F5F5"><span class="chip" style="background:#F5F5F5"></span><span class="nm">象牙｜IVORY</span></button>
      </div>

      <div class="microcopy reveal" style="--d:340ms;">
        已選擇：<span id="pretonePicked" class="we-accent">—</span>
      </div>

      <div class="arch-actions reveal" style="--d:380ms;">
        <button class="ghost-btn" id="toWhoBtn" type="button">繼續</button>
      </div>
    </div>
  </section>

  <!-- ② WHO WE ARE -->
  <section class="s2" id="s2">
    <div class="secno reveal" style="--d:120ms;">02</div>
    <h2 class="reveal in who-title" style="--d:160ms;">WHO <span class="we-accent">WE</span> ARE?</h2>

    <div class="info-card">
      <div class="mini"><span class="kicker reveal in">WHY HESTIA?</span></div>
      <p class="late" data-late>HESTIA 的名字來自希臘神話中守護火爐的女神，</p>
      <p class="late" data-late>象徵<span class="hair-underline">歸屬</span>、<span class="hair-underline">溫暖</span>與內在之火。</p>
      <p class="late" data-late>我們相信，每個人心中都有一簇火焰，</p>
      <p class="late" data-late>等待被看見、被擁抱、被點燃。</p>
    </div>

    <div class="info-card" style="margin-top:12px;">
      <div class="mini"><span class="kicker reveal in">WHAT WE DO</span></div>
      <p class="late" data-late>HESTIA 是一個健身與生活並行的服裝品牌。</p>
      <p class="late" data-late>不管在生活與訓練之間，都能展現符合自己的自信與品味。</p>
    </div>
  </section>

  <!-- ③ BRAND MARK -->
  <section class="s3" id="s3">
    <div class="stack">
      <div class="secno reveal" style="--d:140ms;">03</div>

      <div class="logo-frame frame-size" id="logoFrame" role="button" aria-label="Interact with brand mark" tabindex="0" data-mode="primary">
        <div class="corner-hint" aria-hidden="true"></div>
        <img class="logo-mark" id="logoMark" src="HLOGO.png" alt="HESTIA mark" />
      </div>

      <div class="label reveal" style="--d:220ms;">BRAND MARK</div>
      <h2 class="reveal" style="--d:260ms;">品牌識別</h2>

      <div class="bullets">
        <div class="bullet reveal" style="--d:320ms;">LOGO 靈感來自「火焰燃燒的線條」，帶出<span class="hair-underline">力量</span>與<span class="hair-underline">節制</span>的平衡。</div>
        <div class="bullet reveal" style="--d:380ms;">拱型外型呼應爐灶女神的意象，象徵<span class="hair-underline">歸屬</span>、<span class="hair-underline">溫暖</span>與內在之火。</div>
        <div class="bullet reveal" style="--d:440ms;">代表力量與柔韌的平衡，也象徵身體與心靈的統一。</div>
      </div>

      <div class="sig reveal" style="--d:520ms;">HESTIA的主標識，將在服裝等所有核心視覺中作為第一辨識。</div>
    </div>
  </section>

  <!-- ④ BRAND TAGLINE -->
  <section class="s4b" id="s4b">
    <div class="secno reveal" style="--d:140ms;">04</div>

    <div class="flame-stage">
      <div style="display:flex;justify-content:center;margin-bottom:4px;">
        <span class="kicker reveal" style="--d:180ms;">FLAME MARK</span>
      </div>

      <div class="flame-frame" id="flameFrame" aria-label="Flame Mark reveal">
        <div class="corner-hint" aria-hidden="true"></div>
        <img class="flame-img" id="flameImg" src="Flamemark.png" alt="Flame Mark" />
      </div>

      <h2 class="reveal" style="--d:260ms;">品牌標語</h2>

      <div class="manifest center flame-copy reveal" style="--d:320ms;">
        <p class="late" data-late>這不只是口號，而是一種信念。</p>
        <p class="late" data-late>標籤又如何？那是與生俱來的特色。</p>
        <p class="late" data-late>HESTIA 透過品牌標語「Own Your Flame」</p>
        <p class="late" data-late>無論性別、身形、背景，這些火焰屬於你自己。</p>
        <p class="late" data-late>不用變成誰，你只需要更像你！</p>
      </div>
    </div>
  </section>

 <section class="s4" id="s4">
  <div class="sanctuary-wrap">
    <div class="sanctuary-kicker">
      <span class="kicker reveal" style="--d:180ms;">SANCTUARY</span>
    </div>
    <h2 class="reveal" style="--d:220ms;">SANCTUARY</h2>
    <p class="reveal" style="--d:260ms;">
      下面將是一段短暫的沉靜引導，繼續滑動往下探索。
    </p>
  </div>
</section>


<section class="s4" id="s4a" aria-label="Sanctuary Guide">
  <div class="guide-wrap">
    <div class="sanctuary-kicker">
      <span class="kicker reveal" style="--d:180ms;">SANCTUARY GUIDE</span>
    </div>

    <!-- 引導文字：自動播放（使用者可自由滑動，不鎖、不跳轉） -->
    <div class="cinema guide-cinema" aria-live="polite">
      <div class="cinema-step" id="gc1"><p>現在安靜下來</p></div>
      <div class="cinema-step" id="gc2"><p>讓我帶領你進入 HESTiA 宇宙</p></div>
      <div class="cinema-step" id="gc3"><p>接下來的每一個選擇</p></div>
      <div class="cinema-step" id="gc4"><p>都是你與我們共感的瞬間</p></div>
      <div class="cinema-step" id="gc5"><p>你的每一個選擇</p></div>
      <div class="cinema-step" id="gc6"><p>或許都會成為 HESTiA 的一部分</p></div>

      <!-- ✅ 新增：最後一句 -->
      <div class="cinema-step" id="gc7"><p>向下滑動開始吧</p></div>
    </div>
  </div>
</section>



  <!-- ⑥ Aesthetic Alignment -->
  <section class="s5" id="s5">
    <div class="secno reveal" style="--d:140ms;">06</div>

    <div class="sanctuary-wrap">
      <div class="sanctuary-kicker"><span class="kicker reveal" style="--d:180ms;">AESTHETIC ALIGNMENT</span></div>
      <h2 class="reveal" style="--d:220ms;">你偏好的「穿著色調」</h2>
      <p class="reveal" style="--d:260ms;">
        以下形容都是針對「顏色」，依照描述選擇符合自己偏好的穿著色調。
      </p>

      <div class="align-grid" id="alignGrid" aria-label="Aesthetic alignment choices">
        <div class="mood reveal" style="--d:320ms;" role="button" tabindex="0"
             data-theme="rose_ember" data-value="ROSE EMBER" data-animal="PHOENIX">
          <div class="row">
            <div>
              <div class="title">ROSE EMBER</div>
              <p class="desc">色彩溫暖明亮，像光一般登場；在被看見與被回應中，越分享越被點燃。</p>
            </div>
            <div class="sw" aria-hidden="true">
              <span class="dot-swatch" style="background:#ff6a2a;"></span>
              <span class="dot-swatch" style="background:#ff9150;"></span>
              <span class="dot-swatch" style="background:#1e0e09;"></span>
            </div>
          </div>
        </div>

        <div class="mood reveal" style="--d:380ms;" role="button" tabindex="0"
             data-theme="midnight_tracker" data-value="GLACIAL STRIKER" data-animal="BLACK WOLF">
          <div class="row">
            <div>
              <div class="title">GLACIAL STRIKER</div>
              <p class="desc">冷色主導但彩度極高；雖有似冰山的外表，同時也有強烈的內在。</p>
            </div>
            <div class="sw" aria-hidden="true">
              <span class="dot-swatch" style="background:#00b4ff;"></span>
              <span class="dot-swatch" style="background:#00e5c4;"></span>
              <span class="dot-swatch" style="background:#0a1a2f;"></span>
            </div>
          </div>
        </div>

        <div class="mood reveal" style="--d:440ms;" role="button" tabindex="0"
             data-theme="veil_warden" data-value="VEIL WARDEN" data-animal="DEER">
          <div class="row">
            <div>
              <div class="title">VEIL WARDEN</div>
              <p class="desc">色彩避開太搶眼的視覺刺激，應該溫暖且感覺踏實。</p>
            </div>
            <div class="sw" aria-hidden="true">
              <span class="dot-swatch" style="background:#b8a89a;"></span>
              <span class="dot-swatch" style="background:#d0c2b6;"></span>
              <span class="dot-swatch" style="background:#2a2320;"></span>
            </div>
          </div>
        </div>

        <div class="mood reveal" style="--d:440ms;" role="button" tabindex="0"
             data-theme="low_tide_keeper" data-value="LOW TIDE KEEPER" data-animal="PYTHON">
          <div class="row">
            <div>
              <div class="title">LOW TIDE KEEPER</div>
              <p class="desc">習慣冷色與暗色堆疊，冷靜沉穩中又帶點神祕。</p>
            </div>
            <div class="sw" aria-hidden="true">
              <span class="dot-swatch" style="background:#b8c7c0;"></span>
              <span class="dot-swatch" style="background:#8fbfaf;"></span>
              <span class="dot-swatch" style="background:#1e2a28;"></span>
            </div>
          </div>
        </div>
      </div>

      <div class="microcopy reveal" style="--d:560ms;">
        已選擇：<span id="alignPicked" class="we-accent">—</span>
      </div>
    </div>
  </section>

  <!-- ⑦ Introspective Reflection -->
  <section class="s6" id="s6">
    <div class="secno reveal" style="--d:140ms;">07</div>

    <div class="sanctuary-wrap">
      <div class="sanctuary-kicker"><span class="kicker reveal" style="--d:180ms;">INTROSPECTIVE REFLECTION</span></div>
      <h2 class="reveal" style="--d:220ms;">你的節奏與生活方式</h2>
      <p class="reveal" style="--d:260ms;">
        用直覺選，哪些是你最常回到的那種狀態？
      </p>

      <div class="quiz" id="quiz">
        <div class="q reveal" style="--d:320ms;" data-q="q1">
          <h3>當你想開始動起來，你更接近哪種狀態？</h3>
          <div class="opts">
            <div class="opt" role="button" tabindex="0" data-q="q1" data-a="A">先把四周的聲音調低，慢慢把注意力收回身體。</div>
            <div class="opt" role="button" tabindex="0" data-q="q1" data-a="B">需要一點火花或節奏，情緒一被點亮，身體自然跟上。</div>
            <div class="opt" role="button" tabindex="0" data-q="q1" data-a="C">目標先立起來；目的越清楚，我越能直接進入專注。</div>
          </div>
        </div>

        <div class="q reveal" style="--d:380ms;" data-q="q2">
          <h3>生活中，你希望穿著帶給你的是？</h3>
          <div class="opts">
            <div class="opt" role="button" tabindex="0" data-q="q2" data-a="A">簡單、穩定，安全牌的穿搭，可以每天不需要多想。</div>
            <div class="opt" role="button" tabindex="0" data-q="q2" data-a="B">有變化、有能量；可以依照我的心情喜好變化。</div>
            <div class="opt" role="button" tabindex="0" data-q="q2" data-a="C">看似一成不變，但透過細節亮點和人搭起話題。</div>
          </div>
        </div>

        <div class="q reveal" style="--d:440ms;" data-q="q3">
          <h3>完成一段訓練後，你最想留下的是？</h3>
          <div class="opts">
            <div class="opt" role="button" tabindex="0" data-q="q3" data-a="A">一種安定與歸屬：像每天按部就班的完成感。</div>
            <div class="opt" role="button" tabindex="0" data-q="q3" data-a="B">一股被釋放的熱：像重新啟動，越來越好的自己。</div>
            <div class="opt" role="button" tabindex="0" data-q="q3" data-a="C">清楚俐落的完成感：知道自己在進度條的哪個位置上，且做的準、做得好。</div>
          </div>
        </div>

        <div class="q reveal" style="--d:500ms;" data-q="q4">
          <h3>在日常生活裡，你更常用哪種方式維持狀態？</h3>
          <div class="opts">
            <div class="opt" role="button" tabindex="0" data-q="q4" data-a="B">我需要變化與刺激：新鮮感會讓我更想出門、更想動。</div>
            <div class="opt" role="button" tabindex="0" data-q="q4" data-a="A">固定的步調、固定的選擇，穩定；就是最省力的。</div>
            <div class="opt" role="button" tabindex="0" data-q="q4" data-a="C">我習慣做取捨：把多餘的拿掉，留下有效與精準。</div>
          </div>
        </div>

        <div class="q reveal" style="--d:560ms;" data-q="q5">
          <h3>如果可以嘗試另一種個性，你會選？</h3>
          <div class="opts">
            <div class="opt" role="button" tabindex="0" data-q="q5" data-a="PHOENIX">想更華麗、張揚，讓能量被看見也樂於分享。</div>
            <div class="opt" role="button" tabindex="0" data-q="q5" data-a="KINGFISHER">想更冰冷、距離感，內心卻強烈且行動力十足。</div>
            <div class="opt" role="button" tabindex="0" data-q="q5" data-a="DEER">想更溫馴、規律，讓生活變得更可持續。</div>
            <div class="opt" role="button" tabindex="0" data-q="q5" data-a="PYTHON">想更冷靜、觀察，沉住氣再一擊掌控成功。</div>
          </div>
        </div>

        <div class="quiz-actions reveal" style="--d:600ms;">
          <div class="unlock-hint" id="unlockHint">完成前四題後，按鈕會點亮。</div>
          <button class="ghost-btn" id="unlockBtn" type="button" disabled>解鎖我的原型</button>
        </div>
      </div>
    </div>
  </section>

  <!-- ⑧ Archetype Result -->
  <section class="s7" id="s7">
    <div class="secno reveal" style="--d:140ms;">08</div>

    <div class="result-page" id="resultPage" aria-live="polite">
      <div class="rp-kicker"><span class="kicker reveal" style="--d:180ms;">YOUR ARCHETYPE</span></div>

      <div class="result-shell">
        <div class="arch-emblem reveal" style="--d:220ms;">
          <div class="emblem-slot">
            <img id="archetypeEmblem" class="emblem-img" src="" alt="HESTIA Archetype Emblem">
          </div>
        </div>

        <div>
          <div class="arch-title reveal" style="--d:260ms;" id="archTitle">—</div>
          <div class="arch-sub reveal" style="--d:300ms;" id="archKey">—</div>

          <div class="arch-grid">
            <div class="arch-card reveal" style="--d:360ms;">
              <div class="t">CORE STATE</div>
              <p class="v" id="archCore">—</p>
            </div>
            <div class="arch-card reveal" style="--d:420ms;">
              <div class="t">TRAINING + LIFE RHYTHM</div>
              <p class="v" id="archRhythm">—</p>
            </div>
            <div class="arch-card reveal" style="--d:480ms;">
              <div class="t">STYLE + COLOR DIRECTION</div>
              <p class="v" id="archStyle">—</p>
            </div>
          </div>

          <div class="microcopy reveal" style="--d:540ms;text-align:center;">
            你已選的色調：<span class="we-accent" id="alignPicked2">—</span>｜
            你的原型：<span class="we-accent" id="archPicked">—</span>
          </div>

          <!-- ✅ 落款在上 -->
          <div class="result-watermark reveal" style="--d:620ms;">
            <img src="HLOGO.png" alt="HESTIA watermark logo" />
            <span>HESTIA TAIWAN®</span>
          </div>

          <!-- ✅ 按鈕在下 -->
          <div class="arch-actions reveal" style="--d:580ms;">
            <button class="ghost-btn" id="toHearthBtn" type="button">把光點投入火焰</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ⑨ Our Flame -->
  <section class="s8" id="s8">
    <div class="secno reveal" style="--d:140ms;">09</div>

    <div class="hearth-wrap">
      <div class="hearth-top">
        <div style="display:flex;justify-content:center;margin-bottom:2px;position:relative;z-index:2;">
          <span class="kicker reveal" style="--d:200ms;">COLLECTIVE HEARTH</span>
        </div>

        <canvas class="hearth-canvas" id="flameCanvas" aria-label="Hestia Our Flame"></canvas>

        <div class="hearth-level reveal" style="--d:260ms;">
          HEARTH LEVEL：<span id="hearthLevel" class="we-accent">—</span>
        </div>

        <h2 class="reveal" style="--d:300ms;margin-bottom:6px;">共焰｜OUR FLAME</h2>
        <p class="reveal" style="--d:340ms;max-width:680px;">
          把你的光點，投入火焰！不用搶先，只要守護。
        </p>

        <form id="notify"
              action="https://docs.google.com/forms/d/e/1FAIpQLSfmk4ZgMlWpAbFKa6x1JNAq0hwn6kzXtOoB9e9nIbZxsAuNTA/formResponse"
              method="POST" target="hidden_iframe" autocomplete="off" onsubmit="return submitGForm(event)">

          <input id="email" type="email" name="entry.345729382" placeholder="輸入你的Email搶先收到最新消息" required />

          <input type="hidden" id="f_alignment" name="entry.324440347" value="">
          <input type="hidden" id="f_archetype"  name="entry.1640422124" value="">
          <input type="hidden" id="f_theme"      name="entry.1471764886" value="">
          <input type="hidden" id="f_alt"        name="entry.999999999" value="">

          <button id="tendBtn" type="submit">加入火焰</button>
        </form>

        <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>

        <div class="links reveal" style="--d:420ms;">
          <a href="https://www.instagram.com/hestia.taiwan/" target="_blank" rel="noopener">Instagram</a>
          <a href="https://lin.ee/kjso8Ba" target="_blank" rel="noopener">LINE 官方帳號</a>
        </div>

        <div class="footer-mark">HESTIA TAIWAN®</div>
      </div>
    </div>
  </section>

  <div class="toast" id="toast">訂閱成功！我們將在第一時間通知你最新消息。</div>

  <script>
    const $ = (s, r=document) => r.querySelector(s);
    const $$ = (s, r=document) => Array.from(r.querySelectorAll(s));

    function sleep(ms){ return new Promise(res => setTimeout(res, ms)); }

    function inView(el, topRatio=0.78, bottomRatio=0.18){
      if(!el) return false;
      const r = el.getBoundingClientRect();
      const vh = window.innerHeight || document.documentElement.clientHeight;
      const topLine = vh * topRatio;
      const bottomLine = vh * bottomRatio;
      return (r.top <= topLine) && (r.bottom >= bottomLine);
    }

/* =========================
   Reveal + requestCheck（修正版）
========================= */

const logoFrame = $('#logoFrame');
const logoMark  = $('#logoMark');
const flameFrame = $('#flameFrame');
const flameImg   = $('#flameImg');

let logoRevealed = false;
let flameRevealed = false;

let ticking = false;

function rafCheck(){
  ticking = false;

  $$('.reveal').forEach(el=>{
    if(!el.classList.contains('in') && inView(el, 0.86, 0.05)) el.classList.add('in');
  });

  $$('.late[data-late]').forEach(el=>{
    if(!el.classList.contains('in') && inView(el, 0.86, 0.05)) el.classList.add('in');
  });

  if(logoFrame && logoMark && !logoRevealed && inView(logoFrame, 0.80, 0.15)){
    logoRevealed = true;
    logoFrame.classList.add('in');
    setTimeout(()=>logoMark.classList.add('in'), 520);
    setTimeout(()=>logoFrame.classList.add('sheen'), 1200);
  }

  if(flameFrame && flameImg && !flameRevealed && inView(flameFrame, 0.80, 0.15)){
    flameRevealed = true;
    flameFrame.classList.add('in');
    setTimeout(()=>flameImg.classList.add('in'), 520);
  }
}

function requestCheck(){
  if(ticking) return;
  ticking = true;
  requestAnimationFrame(rafCheck);
}

window.addEventListener('scroll', requestCheck, { passive:true });
window.addEventListener('load', requestCheck);
window.addEventListener('resize', requestCheck);
requestCheck(); // 首次進場就跑一次

/* LOGO click cycle（修正：不要重複宣告，沿用前面已存在的 logoFrame/logoMark/flameFrame/flameImg 與旗標） */
const modes = ['primary','fabric','mono'];
let modeIdx = 0;

function popOnce(){
  logoFrame.classList.remove('pulse');
  logoMark.classList.remove('pop');
  void logoFrame.offsetWidth;
  logoFrame.classList.add('pulse');
  logoMark.classList.add('pop');
}
function cycleMode(){
  modeIdx = (modeIdx + 1) % modes.length;
  logoFrame.setAttribute('data-mode', modes[modeIdx]);
  popOnce();
}
logoFrame.addEventListener('click', cycleMode);
logoFrame.addEventListener('keydown', (e)=>{
  if(e.key === 'Enter' || e.key === ' '){
    e.preventDefault();
    cycleMode();
  }
});

    /* Toast */
    const toast = $('#toast');
    let toastTimer = null;
    function showToast(msg, ms=1100){
      if(!toast) return;
      toast.textContent = msg;
      toast.classList.add('show');
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=>toast.classList.remove('show'), ms);
    }

    /* =========================
       PRETONE
    ========================== */
    const PRETONE_KEY = 'hestia_pretone';
    const pretonePicked = $('#pretonePicked');
    const pretoneWrap = $('#pretoneWrap');
    const breath = $('#breath');

    function pretoneFeedback(hex, label){
      if(pretoneWrap){
        pretoneWrap.classList.remove('pretone-flash');
        void pretoneWrap.offsetWidth;
        pretoneWrap.classList.add('pretone-flash');
      }
      if(breath){
        breath.classList.add('pretone-kick');
        setTimeout(()=>breath.classList.remove('pretone-kick'), 720);
      }
      const t = label ? `PRE-TONE 已套用｜${label}` : `PRE-TONE 已套用｜${hex || ''}`;
      showToast(t, 980);
    }

    function setPreTone(preKey, hex, label){
      const key = preKey || '';
      if(key){
        document.body.setAttribute('data-precolor', key);
        localStorage.setItem(PRETONE_KEY, key);
      }else{
        document.body.removeAttribute('data-precolor');
        localStorage.removeItem(PRETONE_KEY);
      }
      if(pretonePicked) pretonePicked.textContent = (label || '—');
      pretoneFeedback(hex, label);
      setTimeout(requestCheck, 80);
    }

    function initPreTone(){
      const saved = localStorage.getItem(PRETONE_KEY) || '';
      if(saved){
        document.body.setAttribute('data-precolor', saved);
      }
    }
    initPreTone();

    const pretoneBtns = $$('#pretoneGrid .pretone');
    pretoneBtns.forEach(btn=>{
      btn.addEventListener('click', ()=>{
        pretoneBtns.forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        setPreTone(btn.dataset.pre, btn.dataset.hex, btn.querySelector('.nm')?.textContent || '');
      });
    });

    (function syncPreToneUI(){
      const saved = localStorage.getItem(PRETONE_KEY) || '';
      if(!saved) return;
      const hit = pretoneBtns.find(b=>b.dataset.pre === saved);
      if(hit){
        pretoneBtns.forEach(b=>b.classList.remove('active'));
        hit.classList.add('active');
        if(pretonePicked) pretonePicked.textContent = hit.querySelector('.nm')?.textContent || '—';
      }
    })();

    $('#toWhoBtn')?.addEventListener('click', ()=>{
      const s2 = document.getElementById('s2');
      if(s2) s2.scrollIntoView({behavior:'smooth', block:'start'});
      setTimeout(requestCheck, 160);
    });

    /* =========================
       06 Aesthetic（主題色）
    ========================== */
    const moods = $$('#alignGrid .mood');
    const alignPicked = $('#alignPicked');
    const alignPicked2 = $('#alignPicked2');
    const emblemMap = {
      rose_ember: "ROSE.png",
      midnight_tracker: "MID.png",
      veil_warden: "VEIL.png",
      low_tide_keeper: "LOW.png"
    };

    let currentTheme = '';
    let currentAlign = '';
    let currentAnimal = '';

    function setTheme(theme, value, animal){
      currentTheme = theme || '';
      currentAlign = value || '';
      currentAnimal = animal || '';

      document.body.setAttribute('data-theme', currentTheme);

      if(alignPicked)  alignPicked.textContent  = currentAlign || '—';
      if(alignPicked2) alignPicked2.textContent = currentAlign || '—';

      moods.forEach(m=>{
        const on = currentTheme && (m.dataset.theme === currentTheme);
        m.classList.toggle('active', on);
        m.classList.toggle('dim', currentTheme ? !on : false);
      });
      setTimeout(()=>{ moods.forEach(m=>m.classList.remove('dim')); }, 900);
    }

    function initTheme(){
      setTheme('', '', '');
    }
    initTheme();

    moods.forEach(m=>{
      const act = ()=> setTheme(m.dataset.theme, m.dataset.value, m.dataset.animal);
      m.addEventListener('click', act);
      m.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter' || e.key === ' '){
          e.preventDefault();
          act();
        }
      });
    });

    /* =========================================================
       07/08 Archetype（原樣保留）
    ========================================================= */
    const Q07_INDEX_TO_ABC = { 1: "B", 2: "A", 3: "C" };
    const TIE_PRIORITY = ["B", "A", "C"];

    function derive07BiasFromIndexes(qIdx){
      const counts = { A:0, B:0, C:0 };
      ["q1","q2","q3","q4"].forEach(k=>{
        const idx = qIdx[k];
        const abc = Q07_INDEX_TO_ABC[idx];
        if(abc) counts[abc] += 1;
      });
      const maxVal = Math.max(counts.A, counts.B, counts.C);
      const tied = Object.keys(counts).filter(k => counts[k] === maxVal);
      if(tied.length === 1) return tied[0];
      for(const k of TIE_PRIORITY){
        if(tied.includes(k)) return k;
      }
      return "B";
    }

    function archetypeKeyFromTheme(){
      if(currentTheme === "rose_ember") return "PHOENIX";
      if(currentTheme === "midnight_tracker") return "PANTHER";
      if(currentTheme === "veil_warden") return "DEER";
      if(currentTheme === "low_tide_keeper") return "PYTHON";
      return "PHOENIX";
    }

    const RESULT_COPY = {
      "PHOENIX_A": {
        rhythm: "你適合在狀態到位時「順勢推進」的節奏。訓練與生活不必過度規劃，抓住能量高點行動，反而能帶來最大成長。你不怕變動，行動本身就是你的校準方式。",
        style: "你會自然被高對比、明確色彩吸引。偏好能量感強的配色與俐落輪廓，穿著對你而言是一種宣告，而不是背景。"
      },
      "PHOENIX_B": {
        rhythm: "你適合有節奏的推進方式，在穩定中累積能量。訓練與生活彼此支撐，不追求爆發，但每一步都算數。",
        style: "你傾向溫暖但不張揚的色系，細節、耐看、可重複搭配的設計，會讓你感覺越穿越對。"
      },
      "PHOENIX_C": {
        rhythm: "你需要在推進與休息之間留白。訓練與生活應保留彈性，避免一次燃燒過多，讓狀態能長期維持。",
        style: "你會選擇讓穿著成為保護層，而非視覺焦點。幫助你保留狀態，而不是對外表達。"
      },

      "PANTHER_A": {
        rhythm: "你適合主動掌控節奏，設定目標後直接推進。訓練與生活對你而言是執行系統，清楚、果斷、不拖延。",
        style: "你偏好高對比與強輪廓能呼應你的主權感穿著對你而言是行動的一部分，能快速進入狀態、直接推進。"
      },
      "PANTHER_B": {
        rhythm: "你在穩定節奏中發揮最佳表現。訓練與生活越有秩序，你的力量越能完整展現。",
        style: "你喜好的穿著不必多變，但能支持你維持每天的應用場合，不用擔心穿錯或擔心穿甚麼。"
      },
      "PANTHER_C": {
        rhythm: "你需要清楚界線來維持狀態。訓練與生活都不適合過度干擾，保留空間反而讓你更強。",
        style: "你會傾向低曝光、低彩度的色系。穿著不必吸睛，反而更在意要耐看、耐穿。"
      },

      "DEER_A": {
        rhythm: "你適合在感覺對的時候行動。訓練與生活應保留變化，讓身體與情緒帶路，而不是被計畫綁住。",
        style: "你會被自然對比與流動感吸引。穿著色彩需要有呼吸感，而非過度複雜。"
      },
      "DEER_B": {
        rhythm: "你適合溫和而可持續的節奏。訓練與生活需要一致，穩定感會直接反映在狀態上。",
        style: "你偏好柔和、低彩度的色系。穿著的合適與熟悉感會影響你對一件衣服的長期喜好。"
      },
      "DEER_C": {
        rhythm: "你需要高度配合當下狀態。訓練與生活不宜勉強，調整本身就是前進的一部分。",
        style: "你會選擇視覺存在感溫和的穿著，可以讓你自在地停留在自己的狀態裡。"
      },

      "PYTHON_A": {
        rhythm: "你適合在鎖定方向後持續加壓。訓練與生活一旦有了目的，就能長時間推進。",
        style: "你偏好存在感強但不花俏的設計。穿著應該讓視覺感覺集中收斂，也不需要變化太多。"
      },
      "PYTHON_B": {
        rhythm: "你在長期穩定輸出中最有優勢。訓練與生活不求變化，而求深度與持續。",
        style: "你偏好穿著是低調、厚實、耐看的配色。衣服對你而言不是每天重新做選擇。"
      },
      "PYTHON_C": {
        rhythm: "你需要避免頻繁切換。訓練與生活適合單一路線深挖，保留能量比速度更重要。",
        style: "你偏好讓穿著保持低調與節制。顏色成為人群裡的保護層，而非視覺焦點。"
      }
    };

    function applyResultCopy(archetypeKey, bias){
      const key = `${archetypeKey}_${bias}`;
      const copy = RESULT_COPY[key] || RESULT_COPY[`${archetypeKey}_B`];
      if(copy){
        if(archRhythm) archRhythm.textContent = copy.rhythm;
        if(archStyle)  archStyle.textContent  = copy.style;
      }
      return { bias, key };
    }

    const unlockBtn = $('#unlockBtn');
    const unlockHint = $('#unlockHint');

    const archPicked  = $('#archPicked');
    const archTitle = $('#archTitle');
    const archKey   = $('#archKey');
    const archCore  = $('#archCore');
    const archRhythm= $('#archRhythm');
    const archStyle = $('#archStyle');

    const answers = { q1:null, q2:null, q3:null, q4:null, q5:null };
    const answerIdx = { q1:null, q2:null, q3:null, q4:null };

    const opts = $$('.opt');

    function getOptionIndexWithinQuestion(optEl){
      const q = optEl.dataset.q;
      const group = opts.filter(o => o.dataset.q === q);
      const idx = group.indexOf(optEl);
      return idx >= 0 ? (idx + 1) : null;
    }

    function archetypeByAlign(){
      if(currentAlign === 'VEIL WARDEN'){
        return { key:'VEIL WARDEN', zh:'霧幕守望者', coreBase:'你偏好低刺激、可持續的溫柔秩序；越規律，越能讓狀態長期在線。' };
      }
      if(currentAlign === 'GLACIAL STRIKER'){
        return { key:'GLACIAL STRIKER', zh:'冷川襲擊者', coreBase:'你重視精準與行動推進感；越清楚目標，越能把自己帶到結果。' };
      }
      if(currentAlign === 'LOW TIDE KEEPER'){
        return { key:'LOW TIDE KEEPER', zh:'低伏掌控者', coreBase:'你擅長把能量收起來；看似安靜，其實一直在觀察時機，一舉勝利。' };
      }
      return { key:'ROSE EMBER', zh:'玫燼點燃者', coreBase:'你喜歡讓能量被看見；華麗不是浮誇，而是你願意把狀態分享出去的方式。' };
    }

    function computeArchetype(){
      const base = archetypeByAlign();
      const bias = derive07BiasFromIndexes(answerIdx);
      const archetypeKey = archetypeKeyFromTheme();
      return { key: base.key, zh: base.zh, core: base.coreBase, bias, archetypeKey };
    }

    function updateUnlock(){
      const reqOk =
        ["q1","q2","q3","q4"].every(k => Boolean(answerIdx[k])) &&
        Boolean(answers.q5);

      unlockBtn.disabled = !reqOk;
      unlockBtn.classList.toggle('ready', reqOk);

      if(unlockHint){
        unlockHint.textContent = reqOk ? '已完成。點擊「解鎖我的原型」。' : '完成前四題後，按鈕會點亮。';
      }
    }

    function setOptState(q, chosenEl){
      const group = opts.filter(o=>o.dataset.q === q);
      group.forEach(o=>{
        const on = (o === chosenEl);
        o.classList.toggle('active', on);
        o.classList.toggle('dim', !on);
      });
      setTimeout(()=>{ group.forEach(o=>o.classList.remove('dim')); }, 700);
    }

    opts.forEach(o=>{
      const act = ()=>{
        const q = o.dataset.q;
        const a = o.dataset.a;

        answers[q] = a;
        if(q !== "q5"){
          answerIdx[q] = getOptionIndexWithinQuestion(o);
        }

        setOptState(q, o);
        updateUnlock();
      };
      o.addEventListener('click', act);
      o.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter' || e.key === ' '){
          e.preventDefault();
          act();
        }
      });
    });

    unlockBtn.addEventListener('click', ()=>{
      const r = computeArchetype();

      const emblemEl = document.getElementById("archetypeEmblem");
      if (emblemEl) {
        const src = emblemMap[currentTheme] || "";
        emblemEl.src = src;
      }

      archTitle.textContent = r.zh;
      archKey.textContent   = r.key;
      archCore.textContent  = r.core;

      applyResultCopy(r.archetypeKey, r.bias);

      if(archPicked) archPicked.textContent = r.zh;

      setTimeout(()=>{
        const s7 = document.getElementById('s7');
        if(s7) s7.scrollIntoView({behavior:'smooth', block:'start'});
        setTimeout(requestCheck, 180);
      }, 260);
    });

    $('#toHearthBtn').addEventListener('click', ()=>{
      const s8 = document.getElementById('s8');
      if(s8) s8.scrollIntoView({behavior:'smooth', block:'start'});
      setTimeout(requestCheck, 180);
    });

    /* Form */
    const iframe = $('#hidden_iframe');
    let submittedAt = 0;

    function submitGForm(e){
      const input = $('#email');
      const email = (input.value||'').trim();
      if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){
        alert('請輸入有效的 Email');
        return false;
      }

      const align = currentAlign || '—';
      const theme = currentTheme || '';
      const arch  = (archPicked && archPicked.textContent && archPicked.textContent !== '—') ? archPicked.textContent : '';

      $('#f_alignment').value = align;
      $('#f_theme').value = theme;
      $('#f_archetype').value = arch;
      $('#f_alt').value = answers.q5 || '';

      submittedAt = Date.now();

      castSparkFromElement($('#tendBtn'));
      setCount(getCount()+1);
      applyLevel();

      return true;
    }

    iframe.addEventListener('load',()=>{
      if(Date.now()-submittedAt<350) return;
      $('#email').value='';
      showToast('訂閱成功！我們將在第一時間通知你最新消息。', 2600);
    });

    /* Dots behavior */
    const sections = ['s1','s1b','s2','s3','s4b','s4','s5','s6','s7','s8'].map(id=>document.getElementById(id));
    const dots = $$('.dot');

    function setActiveDot(idx){ dots.forEach((d,i)=>d.classList.toggle('active', i===idx)); }

    let lastActive = 0;
    function updateActiveDot(){
      const vh = window.innerHeight;
      let best = {idx:0, score:999999};
      sections.forEach((sec, idx)=>{
        if(!sec) return;
        const r = sec.getBoundingClientRect();
        const center = r.top + r.height/2;
        const score = Math.abs(center - vh/2);
        if(score < best.score) best = {idx, score};
      });
      setActiveDot(best.idx);

      if(best.idx !== lastActive){
        breath.classList.add('transition');
        requestAnimationFrame(()=>{
          breath.classList.add('release');
          setTimeout(()=>breath.classList.remove('transition','release'), 620);
        });
        lastActive = best.idx;
      }
    }

    dots.forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const id = btn.getAttribute('data-target');
        const target = document.getElementById(id);
        if(!target) return;
        target.scrollIntoView({behavior:'smooth', block:'start'});
        setTimeout(requestCheck, 120);
        setTimeout(requestCheck, 520);
      }, {passive:true});
    });

    const dotsNav = $('#dotsNav');
    let hinted = false;
    function onFirstScroll(){
      if(hinted) return;
      hinted = true;
      dotsNav.classList.add('hint');
      setTimeout(()=>dotsNav.classList.remove('hint'), 1200);
      window.removeEventListener('scroll', onFirstScroll, {passive:true});
    }
    window.addEventListener('scroll', onFirstScroll, {passive:true});

    function extraTick(){ updateActiveDot(); }
    window.addEventListener('scroll', ()=>{ requestAnimationFrame(extraTick); }, {passive:true});
    window.addEventListener('load', ()=>{
      requestAnimationFrame(extraTick);
      setTimeout(()=>requestAnimationFrame(extraTick), 240);
    });
    window.addEventListener('resize', ()=>requestAnimationFrame(extraTick));

    setTimeout(requestCheck, 60);
    setTimeout(()=>{ requestCheck(); requestAnimationFrame(extraTick); }, 260);

    /* =========================
       Collective Hearth (Canvas 2D)
    ========================== */
    const canvas = $('#flameCanvas');
    const ctx = canvas.getContext('2d', { alpha:true });
    let W=0,H=0, dpr=1;

    function resizeCanvas(){
      const rect = canvas.getBoundingClientRect();
      dpr = Math.min(2, window.devicePixelRatio || 1);
      W = Math.floor(rect.width * dpr);
      H = Math.floor(rect.height * dpr);
      canvas.width = W;
      canvas.height = H;
    }
    window.addEventListener('resize', resizeCanvas);
    window.addEventListener('load', resizeCanvas);
    resizeCanvas();

    const particles = [];
    let running = true;
    let boost = 0;
    let globalIntensity = 1.0;

    const HEARTH_KEY = 'hestia_hearth_count';
    const HEARTH_LEVEL_KEY = 'hestia_hearth_level';
    const hearthLevelEl = $('#hearthLevel');

    let levelBoost = 0;

    function getCount(){
      return parseInt(localStorage.getItem(HEARTH_KEY) || '37', 10);
    }
    function setCount(n){
      localStorage.setItem(HEARTH_KEY, String(n));
    }

    function levelFromCount(n){
      if(n < 50) return 'Ember';
      if(n < 150) return 'Glow';
      if(n < 350) return 'Warmth';
      if(n < 700) return 'Hearth';
      return 'Flame';
    }

    function showHearthToast(from, to){
      const msg = {
        Ember:  '火種被更多人守住了。',
        Glow:   '微光開始聚集。',
        Warmth: '溫度正在形成。',
        Hearth: '爐火已穩定燃燒。',
        Flame:  '這裡成為真正的火焰。'
      };
      showToast(`HEARTH UPGRADED｜${to.toUpperCase()} — ${msg[to] || ''}`, 3200);
    }

    function applyLevel(){
      const n = getCount();
      const newLevel = levelFromCount(n);
      const prevLevel = localStorage.getItem(HEARTH_LEVEL_KEY);

      if(hearthLevelEl) hearthLevelEl.textContent = newLevel;

      if(prevLevel && prevLevel !== newLevel){
        showHearthToast(prevLevel, newLevel);
        levelBoost = 1.0;
        setTimeout(()=> levelBoost = 0, 1200);
      }

      localStorage.setItem(HEARTH_LEVEL_KEY, newLevel);

      const base = (n < 50) ? 0.92 :
                   (n < 150) ? 0.98 :
                   (n < 350) ? 1.04 :
                   (n < 700) ? 1.10 : 1.16;
      globalIntensity = base;
    }
    applyLevel();

    function addParticle(x, y, vx, vy, life, size, hue){
      particles.push({x,y,vx,vy,life,maxLife:life,size,hue});
    }

    function spawnBase(){
      const baseX = W * 0.5;
      const baseY = H * 0.82;
      const n = 6;
      for(let i=0;i<n;i++){
        const spread = (0.20 + Math.random()*0.18) * W * 0.12;
        const x = baseX + (Math.random()*2-1) * spread;
        const y = baseY + (Math.random()*2-1) * (H*0.006);
        const vx = (Math.random()*2-1) * (W*0.00025);
        const vy = -(H*0.0012 + Math.random() * H*0.0016);
        const life = 56 + Math.random()*42;
        const size = (1.4 + Math.random()*2.4) * dpr;
        const hue = 18 + Math.random()*28;
        addParticle(x,y,vx,vy,life,size,hue);
      }
    }

    function draw(){
      if(!running) return;

      boost = Math.max(boost, levelBoost);
      boost *= 0.92;

      ctx.clearRect(0,0,W,H);

      const gx = W*0.5, gy = H*0.86;
      const g = ctx.createRadialGradient(gx,gy,0,gx,gy,H*0.42);
      const b = 0.10 + boost*0.06;
      g.addColorStop(0, `rgba(255,106,42,${0.12*globalIntensity + b})`);
      g.addColorStop(0.45, `rgba(255,175,90,${0.08*globalIntensity + b*0.6})`);
      g.addColorStop(1, 'rgba(0,0,0,0)');
      ctx.fillStyle = g;
      ctx.fillRect(0,0,W,H);

      spawnBase();

      for(let i=particles.length-1;i>=0;i--){
        const p = particles[i];
        p.life -= 1;
        if(p.life <= 0){
          particles.splice(i,1);
          continue;
        }

        const t = 1 - p.life/p.maxLife;
        const cx = W*0.5;
        p.vx += (cx - p.x) * (W*0.00000010);
        p.x += p.vx;
        p.y += p.vy;
        p.vy *= 0.995;
        p.vx *= 0.996;

        const a = (1 - t) * 0.26 * globalIntensity + boost*0.04;
        const size = p.size * (1.0 + t*0.55);

        ctx.beginPath();
        ctx.fillStyle = `hsla(${p.hue}, 82%, ${56 + t*10}%, ${Math.max(0, a)})`;
        ctx.arc(p.x, p.y, size, 0, Math.PI*2);
        ctx.fill();
      }

      const cap = 520;
      if(particles.length > cap) particles.splice(0, particles.length-cap);

      requestAnimationFrame(draw);
    }
    requestAnimationFrame(draw);

    function castSparkFromElement(el){
      if(!el) return;
      const r = el.getBoundingClientRect();
      const c = canvas.getBoundingClientRect();
      const startX = (r.left + r.width*0.5 - c.left) * dpr;
      const startY = (r.top + r.height*0.5 - c.top) * dpr;

      const targetX = W*0.5;
      const targetY = H*0.80;

      const sparks = 32;
      for(let i=0;i<sparks;i++){
        const dx = (targetX - startX);
        const dy = (targetY - startY);
        const vx = dx * (0.008 + Math.random()*0.004) + (Math.random()*2-1)*W*0.0006;
        const vy = dy * (0.010 + Math.random()*0.004) - Math.random()*H*0.002;
        addParticle(startX, startY, vx, vy, 34 + Math.random()*18, (1.6+Math.random()*2.2)*dpr, 330 + Math.random()*20);
      }
      boost = Math.min(1.2, boost + 0.85);
    }

/* =========================
   05A GUIDE — auto play, slower, no skip, no auto-jump
   使用者可自由滑動：不鎖、不要求點擊、不自動跳到 06
========================= */
const s4a = document.getElementById('s4a');

const gcSteps = [
  document.getElementById('gc1'),
  document.getElementById('gc2'),
  document.getElementById('gc3'),
  document.getElementById('gc4'),
  document.getElementById('gc5'),
  document.getElementById('gc6'),
  document.getElementById('gc7'),
].filter(Boolean);

let guideBusy = false;
let guidePlayed = false;
let guideAbort = false;

function resetGuideSteps(){
  gcSteps.forEach(el => el.classList.remove('show','hide'));
}

async function playGuideAuto(){
  if(guideBusy || guidePlayed || !s4a) return;
  guideBusy = true;
  guideAbort = false;

  resetGuideSteps();

  // ✅ 更慢節奏（你要更慢就把 slow 再加大）
  const slow = 1.55;
  const showDur = [1500,1350,1350,1350,1500,900].map(v => v * slow);
  const gapDur  = 560 * slow;

  for(let i=0;i<gcSteps.length;i++){
    if(guideAbort) break;
    const el = gcSteps[i];
    if(!el) continue;

    el.classList.add('show');
    await sleep(showDur[i] || (1400*slow));

    if(guideAbort) break;
    if(i === gcSteps.length - 1) break;

    el.classList.remove('show');
    el.classList.add('hide');
    await sleep(gapDur);
  }

  guideBusy = false;
  guidePlayed = true;

  // ✅ 不自動跳轉到 s5 / s6，讓使用者自由滑動
}

function guideInView(){
  return inView(s4a, 0.78, 0.18);
}

// 進入視窗就自動播放一次
function guideWatcher(){
  if(!s4a) return;
  if(guideInView()){
    playGuideAuto();
  }else{
    // 若使用者滑走，允許中止播放（不影響後續自由瀏覽）
    guideAbort = true;
  }
}

window.addEventListener('scroll', guideWatcher, { passive:true });
window.addEventListener('load', guideWatcher);
window.addEventListener('resize', guideWatcher);
setTimeout(guideWatcher, 120);


  </script>
</body>
</html>
